const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/developer-roadmap-master/_astro/dom-to-image.DaV2Itzc.js","/developer-roadmap-master/_astro/index.DatCARk7.js"])))=>i.map(i=>d[i]);
import{j as e}from"./jsx-runtime.D_zvdyIk.js";/* empty css                       */import{r as t}from"./index.DatCARk7.js";import{u as pe}from"./use-toast.BdCcSTJE.js";import{generateAIRoadmapFromText as ce,renderFlowJSON as ke}from"./index.BgRaT1MR.js";import{r as Ie}from"./dom.B_TnKQIa.js";import{i as G,r as xe,a as Ce,v as Ae}from"./jwt.1xGNZsvU.js";import{s as D}from"./popup.CdCAhVM2.js";import{c as U}from"./classname.y9b8gBZq.js";import{u as ue}from"./use-outside-click.f1LA7r1K.js";import{u as Te}from"./use-debounce.2NG_dkht.js";import{b as se,h as Le}from"./http.qJhOBTpO.js";import{S as ae}from"./Spinner.CPY-6wbR.js";import{U as fe}from"./UpgradeAccountModal.Bf1PhEwX.js";import{u as he}from"./billing.CdvAGjKR.js";import{c as ge}from"./createLucideIcon.uNyFMN5K.js";import{B as re,r as Ee,I as _e,a as Oe,g as De}from"./ai.CwFQCDSa.js";import{A as W}from"./arrow-up-right.DMKR5D6V.js";import{T as Q}from"./RoadmapAlert.DN0qKD_z.js";import{S as Ge}from"./ShareRoadmapButton.CL5HnPkE.js";import{p as z}from"./page.DyYQD7MX.js";import{g as Ue,d as Z}from"./browser.3c2kCsRM.js";import{_ as Me}from"./preload-helper.sN6dSm8X.js";import{u as ze}from"./use-keydown.UQ-VttR1.js";import{m as Pe}from"./markdown.BXNIcYB9.js";import{X as me}from"./x.ZVxf9pxD.js";import{A as Fe}from"./arrow-right.DyYIhVNn.js";import{F as $e}from"./file-text.QnmHb0pX.js";import{A as Ve}from"./AIRoadmapAlert.Uw0Wfs7r.js";import{AuthenticationForm as qe}from"./AuthenticationForm.B1N9ImB5.js";import{D as Be}from"./download.B9ana_7Q.js";import{S as He}from"./save.BkNgyNj1.js";import{S as Ke}from"./square-pen.oIdiM-Bb.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.D_pnqQn4.js";import"./useQuery.BDS8a8wn.js";import"./query-client.BXTfwa3d.js";import"./useMutation.BrRqCquH.js";import"./query-http.YhxTqNi8.js";import"./Modal.B1RqXaQs.js";import"./UpdatePlanConfirmation.vVGIG51-.js";import"./VerifyUpgrade.DHdhu0dP.js";import"./circle-check-big.DD4Bg2zr.js";import"./loader-circle.1OH4z0ap.js";import"./zap.W9oJWPBR.js";import"./message-circle.gi35PKdE.js";import"./map.D6boQwTM.js";import"./heart-handshake.D70r9b2H.js";import"./use-copy-text.DMdbdIxo.js";import"./TwitterIcon.D4xHZP6Y.js";import"./index.CZrsCZXo.js";import"./roadmap.DwTTnFhR.js";import"./index.BHh4vvK5.js";import"./check.DCsIB_xO.js";import"./copy.IVh-7Rp7.js";import"./linkedin.Do1-d-U6.js";import"./bot.BOh-sxCh.js";import"./GitHubButton.DzZtVaKf.js";import"./GitHubIcon.NZCYHAdm.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],Je=ge("contact",Ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M15 4V2",key:"z1p9b7"}],["path",{d:"M15 16v-2",key:"px0unx"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M17.8 11.8 19 13",key:"yihg8r"}],["path",{d:"M15 9h.01",key:"x1ddxp"}],["path",{d:"M17.8 6.2 19 5",key:"fd4us0"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M12.2 6.2 11 5",key:"i3da3b"}]],H=ge("wand",Xe);function be(I){const{value:i,onValueChange:x,onSelect:l,inputClassName:c,wrapperClassName:u,placeholder:j,...g}=I;t.useMemo(()=>new Map,[]);const[b,C]=t.useState([]),w=pe(),T=t.useRef(null),v=t.useRef(null),f=t.useRef(!0),[y,m]=t.useState(!1),[L,M]=t.useState(!1),[a,E]=t.useState([]),[N,A]=t.useState(i),[_,S]=t.useState(0),P=Te(N,300),q=async()=>{if(b.length>0)return b;const{error:n,response:o}=await se("/pages.json");if(n){w.error(n.message||"Something went wrong");return}if(!o)return[];const B=o.filter(O=>O.group==="Roadmaps").sort((O,K)=>O.title==="Android"?1:O.title.localeCompare(K.title)).map(O=>({_id:O.id,term:O.title,title:O.title,isOfficial:!0}));return C(B),B};t.useEffect(()=>{f.current&&(f.current=!1,q().finally(()=>{}))},[]),ue(v,()=>{m(!1)});const R=P===N;return e.jsxs("div",{className:U("relative",u),children:[e.jsx("input",{...g,ref:T,type:"text",value:i,className:U("w-full rounded-md border border-gray-400 px-3 py-2.5 pr-8 transition-colors focus:border-black focus:outline-hidden",c),placeholder:j,autoComplete:"off",onChange:n=>{const o=n.target.value;A(o),x(o)},onFocus:()=>{m(!0)},onKeyDown:n=>{if(n.key==="ArrowDown"){const o=_<a.length-1;S(o?_+1:0)}else if(n.key==="ArrowUp"){const o=_>0;S(o?_-1:a.length-1)}else if(n.key==="Tab")y&&n.preventDefault();else if(n.key==="Escape")A(""),m(!1);else if(n.key==="Enter"){if(!a.length||!R)return;n.preventDefault();const o=a[_];if(o){if(o.isOfficial){window.open(`/${o._id}`,"_blank")?.focus();return}x(o.term),l?.(o._id,o.title),m(!1)}}}}),L&&e.jsx("div",{className:"absolute right-3 top-0 flex h-full items-center",children:e.jsx(ae,{isDualRing:!1,className:"h-5 w-5 animate-spin stroke-[2.5]"})}),y&&R&&a.length>0&&N.length>0&&e.jsx("div",{className:"absolute top-full z-50 mt-1 w-full rounded-md border bg-white p-1 shadow-sm",ref:v,children:e.jsx("div",{className:"flex flex-col",children:a.map((n,o)=>e.jsxs("button",{type:"button",className:U("flex w-full items-start rounded-sm p-2 text-left text-sm",o===_?"bg-gray-100":""),onMouseOver:()=>S(o),onClick:()=>{if(n.isOfficial){window.location.href=`/${n._id}`;return}x(n?.term),l?.(n._id,n.title),A(""),m(!1)},children:[e.jsx("span",{className:U("mr-2 whitespace-nowrap rounded-full p-1 px-1.5 text-xs leading-none",n.isOfficial?"bg-green-500 text-green-50":"bg-blue-400 text-blue-50"),children:n.isOfficial?"Official":"AI Generated"}),n?.title||n?.term]},n?._id))})})]})}function We(I){const{roadmapTerm:i,setRoadmapTerm:x,handleSubmit:l,limit:c=0,limitUsed:u=0,onLoadTerm:j,loadAIRoadmapLimit:g,isKeyOnly:b}=I,{isPaidUser:C}=he(),w=u<c,[T,v]=t.useState(!1),[f,y]=t.useState(!1),[m,L]=t.useState(!1);t.useEffect(()=>{y(G())},[]);const M=["OAuth","UI / UX","SRE","DevRel"];return e.jsxs("div",{className:"flex grow flex-col items-center px-4 py-6 sm:px-6 md:my-24 lg:my-32",children:[T&&e.jsx(fe,{onClose:()=>{v(!1),g()}}),e.jsxs("div",{className:"flex flex-col gap-0 text-center sm:gap-2",children:[e.jsxs("h1",{className:"relative text-2xl font-medium sm:text-3xl",children:[e.jsx("span",{className:"hidden sm:inline",children:"Generate roadmaps with AI"}),e.jsx("span",{className:"inline sm:hidden",children:"AI Roadmap Generator"})]}),e.jsxs("p",{className:"text-base text-gray-500 sm:text-lg",children:[e.jsx("span",{className:"hidden sm:inline",children:"Enter a topic and let the AI generate a roadmap for you"}),e.jsx("span",{className:"inline sm:hidden",children:"Enter a topic to generate a roadmap"})]})]}),e.jsxs("div",{className:"my-3 flex w-full max-w-[600px] flex-col items-center gap-3 sm:my-5",children:[e.jsxs("form",{onSubmit:a=>{c>0&&w?l(a):a.preventDefault()},className:"flex w-full flex-col gap-2 sm:flex-row",children:[e.jsx(be,{autoFocus:!0,value:i,onValueChange:a=>x(a),placeholder:"Enter a topic to generate a roadmap for",wrapperClassName:"w-full",onSelect:(a,E)=>{j(E)}}),e.jsxs("button",{className:U("flex min-w-[154px] shrink-0 items-center justify-center gap-2 rounded-md bg-black px-4 py-2 text-white","disabled:cursor-not-allowed disabled:opacity-50"),onClick:a=>{f||(a.preventDefault(),D())},disabled:m||f&&(!c||!i||u>=c||b),children:[m&&e.jsx(e.Fragment,{children:e.jsx("span",{children:"Please wait.."})}),!m&&e.jsxs(e.Fragment,{children:[!f&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),f&&e.jsxs(e.Fragment,{children:[(!c||w)&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),c>0&&!w&&e.jsxs("span",{className:"flex items-center text-base",children:[e.jsx(re,{size:15,className:"mr-2"}),"Limit reached"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-row flex-wrap items-center justify-center gap-2",children:[M.map(a=>e.jsxs("button",{disabled:f&&(!c||!w),type:"button",onClick:()=>{if(!f){D();return}j(a)},className:"flex items-center gap-1.5 rounded-full border px-2 py-0.5 text-sm transition-colors hover:border-black hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50",children:[a," ",e.jsx(W,{size:17})]},a)),e.jsxs("a",{href:"/ai-roadmaps/explore",className:"flex items-center gap-1.5 rounded-full border border-black bg-gray-700 px-2 py-0.5 text-sm text-white transition-colors hover:border-black hover:bg-black",children:["Explore AI Roadmaps ",e.jsx(Q,{size:17})]})]})]}),!f&&e.jsxs("div",{className:"mt-8 flex max-w-[500px] flex-col items-center gap-3 rounded-xl border border-gray-400 px-4 pb-4 pt-3",children:[e.jsxs("p",{className:"text-center text-gray-500",children:[e.jsx("button",{onClick:D,className:"font-medium text-purple-600 underline underline-offset-2 hover:text-purple-800",children:"Sign up (free and takes 2s) or login"})," ","to start generating roadmaps. Or explore the ones made by the community."]}),e.jsxs("p",{className:"flex flex-col gap-2 text-center text-gray-500 sm:flex-row",children:[e.jsxs("a",{href:"/ai-roadmaps/explore",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Explore AI Generated Roadmaps ",e.jsx(Q,{size:15})]}),e.jsxs("a",{href:"/roadmaps",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Visit Official Roadmaps ",e.jsx(W,{size:15})]})]})]}),b&&f&&!C&&e.jsxs("div",{className:"mx-auto mt-12 flex max-w-[450px] flex-col items-center gap-4",children:[e.jsxs("p",{className:"text-center text-red-500",children:["We have hit the limit for AI roadmap generation. Please try again again later or"," ",e.jsx("button",{onClick:()=>v(!0),className:"font-semibold text-purple-600 underline underline-offset-2",children:"get more credits."})]}),e.jsxs("p",{className:"flex flex-col gap-2 text-center text-gray-500 sm:flex-row",children:[e.jsxs("a",{href:"/ai-roadmaps/explore",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Explore AI Roadmaps ",e.jsx(Q,{size:15})]}),e.jsxs("a",{href:"/roadmaps",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Visit Official Roadmaps ",e.jsx(W,{size:15})]})]})]}),!b&&c>0&&f&&!C&&e.jsxs("div",{className:"mt-12 flex flex-col items-center gap-4",children:[e.jsxs("p",{className:"text-center text-gray-500",children:["You have generated"," ",e.jsxs("span",{className:"inline-block min-w-[50px] rounded-xl border px-1.5 text-center text-sm tabular-nums text-gray-800",children:[u," of ",c]})," ","roadmaps today."]}),e.jsx("p",{className:"flex items-center text-sm",children:e.jsxs("button",{onClick:()=>v(!0),className:"rounded-xl border border-current px-2 py-0.5 text-sm text-blue-500 transition-colors hover:bg-blue-400 hover:text-white",children:["Need to generate more?"," ",e.jsx("span",{className:"font-semibold",children:"Click here."})]})})]})]})}async function Qe(I,i){const x=document.createElement("div");x.className="flex justify-end absolute top-4 right-4 gap-2",x.innerHTML=`
    <span
      class='rounded-md bg-black py-2 px-2 text-white'
    >
      roadmap.sh
    </span>
  `,i.insertAdjacentElement("afterbegin",x);const l=(await Me(async()=>{const{default:j}=await import("./dom-to-image.DaV2Itzc.js").then(g=>g.d);return{default:j}},__vite__mapDeps([0,1]))).default;if(!l)throw new Error("Unable to download image");const c=await l.toJpeg(i,{bgcolor:"white",quality:1});i?.removeChild(x);const u=document.createElement("a");u.download=`${I}-roadmap.jpg`,u.href=c,u.click()}function Ze(I){const{onClose:i,roadmapId:x,nodeTitle:l,parentTitle:c,topicLimit:u,topicLimitUsed:j,onTopicContentGenerateComplete:g,onConfigureOpenAI:b}=I,[C,w]=t.useState(!1),[T,v]=t.useState(""),[f,y]=t.useState(""),[m,L]=t.useState(!1),M=t.useRef(null),a=t.useMemo(()=>new AbortController,[]),E=async()=>{if(w(!0),v(""),!G())return;if(!x||!l){w(!1),v("Invalid roadmap id or node title");return}const A=await fetch(`https://api.roadmap.sh/v1-generate-ai-roadmap-content/${x}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({nodeTitle:l,parentTitle:c}),signal:a.signal});if(!A.ok){const S=await A.json();v(S?.message||"Something went wrong"),w(!1),S.status===401&&(xe(),window.location.reload())}const _=A.body?.getReader();if(!_){w(!1),v("Something went wrong");return}w(!1),L(!0),await Ee(_,{onStream:async S=>{y(Pe(S,!1))},onStreamEnd(S){L(!1)}}),g?.()};ue(M,()=>{i?.()}),ze("Escape",()=>{i?.()}),t.useEffect(()=>{if(M?.current)return M?.current?.focus(),E().finally(()=>{}),()=>{a.abort()}},[]);const N=f?.length>0;return e.jsxs("div",{className:"relative z-92",children:[e.jsxs("div",{ref:M,tabIndex:0,className:"fixed right-0 top-0 z-40 h-screen w-full overflow-y-auto bg-white p-4 focus:outline-0 sm:max-w-[600px] sm:p-6",children:[G()&&e.jsxs("div",{className:"flex flex-col items-start gap-2 sm:flex-row",children:[e.jsxs("span",{children:[e.jsxs("span",{className:U("mr-0.5 inline-block rounded-xl border px-1.5 text-center text-sm tabular-nums text-gray-800",{"animate-pulse border-zinc-300 bg-zinc-300 text-zinc-300":!u}),children:[j," of ",u]})," ","topics generated"]}),e.jsxs("button",{className:"rounded-xl border border-current px-1.5 py-0.5 text-left text-sm font-medium text-blue-500 sm:text-center",onClick:b,children:["Need more? ",e.jsx("span",{className:"font-semibold",children:"Click here."})]})]}),G()&&C&&e.jsx("div",{className:"mt-6 flex w-full justify-center",children:e.jsx(ae,{outerFill:"#d1d5db",className:"h-6 w-6 sm:h-12 sm:w-12",innerFill:"#2563eb"})}),!G()&&e.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[e.jsx(Je,{className:"mb-3.5 h-14 w-14 text-gray-200"}),e.jsx("h2",{className:"text-xl font-medium",children:"You must be logged in"}),e.jsx("p",{className:"text-base text-gray-400",children:"Sign up or login to generate topic content."}),e.jsx("button",{className:"mt-3.5 w-full max-w-[300px] rounded-md bg-black px-3 py-2 text-base font-medium text-white",onClick:D,children:"Sign up / Login"})]}),!C&&!T&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:e.jsx("button",{type:"button",id:"close-topic",className:"absolute right-2.5 top-2.5 inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900",onClick:i,children:e.jsx(me,{className:"h-5 w-5"})})}),N?e.jsxs("div",{className:"prose prose-quoteless prose-h1:mb-2.5 prose-h1:mt-7 prose-h2:mb-3 prose-h2:mt-0 prose-h3:mb-[5px] prose-h3:mt-[10px] prose-p:mb-2 prose-p:mt-0 prose-blockquote:font-normal prose-blockquote:not-italic prose-blockquote:text-gray-700 prose-li:m-0 prose-li:mb-0.5",children:[e.jsx("div",{id:"topic-content",dangerouslySetInnerHTML:{__html:f}}),!m&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:"/ai",className:"mb-1 mt-2 inline-flex items-center rounded-md bg-yellow-400 px-3 py-2 text-sm font-medium text-gray-800 no-underline hover:bg-yellow-500",children:["Dive deeper using AI Tutor",e.jsx(Fe,{className:"ml-2 h-4 w-4"})]})})]}):e.jsxs("div",{className:"flex h-[calc(100%-38px)] flex-col items-center justify-center",children:[e.jsx($e,{className:"h-16 w-16 text-gray-300"}),e.jsx("p",{className:"mt-2 text-lg font-medium text-gray-500",children:"Empty Content"})]})]}),!C&&T&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",id:"close-topic",className:"absolute right-2.5 top-2.5 inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900",onClick:i,children:e.jsx(me,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[e.jsx(re,{className:"h-16 w-16 text-red-500"}),e.jsx("p",{className:"mt-2 text-lg font-medium text-red-500",children:T})]})]})]}),e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-900/50"})]})}const ee=new RegExp("@ROADMAPID:(\\w+)@"),te=new RegExp(/@ROADMAPSLUG:([\w-]+)@/);function et(I){const i=I?.closest("g")||{},x=i?.dataset?.nodeId,l=i?.dataset?.type,c=i?.dataset?.title,u=i?.dataset?.parentTitle,j=i?.dataset?.parentId;return!x||!l?null:{nodeId:x,nodeType:l,targetGroup:i,nodeTitle:c,parentTitle:u,parentId:j}}const tt=["topic","subtopic","button","link-item"];function cs(I){const{roadmapId:i,slug:x,isAuthenticatedUser:l=G()}=I,c=t.useRef(null),{isPaidUser:u}=he(),{rc:j}=Ue(),g=pe(),[b,C]=t.useState(i),[w,T]=t.useState(x),[v,f]=t.useState(!!b),[y,m]=t.useState(!1),[L,M]=t.useState(!1),[a,E]=t.useState(""),[N,A]=t.useState(null),[_,S]=t.useState(""),[P,q]=t.useState(null),[R,n]=t.useState(0),[o,B]=t.useState(0),[O,K]=t.useState(0),[we,ye]=t.useState(0),[je,Y]=t.useState(!1),J=_e,ne=async s=>{De(s);const{nodes:h,edges:p}=ce(),d=await ke();c?.current&&Ie(c?.current,d)},X=async s=>{m(!0),f(!0),Z("id"),A(null);const h=window.location.origin,p=await fetch("https://api.roadmap.sh/v1-generate-ai-roadmap"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({term:s})});if(!p.ok){const r=await p.json();g.error(r?.message||"Something went wrong"),m(!1),r.status===401&&(xe(),window.location.reload())}const d=p.body?.getReader();if(!d){m(!1),g.error("Something went wrong");return}await Oe(d,{onStream:async r=>{if(r.includes("@ROADMAPID")||r.includes("@ROADMAPSLUG")){const k=r.match(ee)?.[1]||"",$=r.match(te)?.[1]||"";$&&window.history.pushState({roadmapId:k,roadmapSlug:$},"",`${h}/ai-roadmaps/${$}`),r=r.replace(ee,"").replace(te,""),C(k),T($);const V=r.trim().split(`
`)[0]?.replace("#","")?.trim()||s;E(V),A({id:k,term:a,title:V,data:r})}await ne(r)},onStreamEnd:async r=>{r=r.replace(ee,"").replace(te,""),S(r),F().finally(()=>{})}}),m(!1)},oe=async s=>{s.preventDefault(),!(!a||L)&&a!==N?.term&&X(a).finally(()=>null)},ie=async()=>{if(!G()){D();return}z.set("Redirecting to Editor");const{nodes:s,edges:h}=ce(),{response:p,error:d}=await Le(`https://api.roadmap.sh/v1-save-ai-roadmap/${N?.id}`,{title:a,nodes:s.map(r=>({...r,width:void 0,height:void 0,style:{...r.style,width:void 0,height:void 0},measured:{width:void 0,height:void 0}})),edges:h});if(d||!p){g.error(d?.message||"Something went wrong"),z.set(""),m(!1);return}return m(!1),z.set(""),{roadmapId:p.roadmapId,roadmapSlug:p.roadmapSlug}},ve=async()=>{if(!G()){D();return}z.set("Downloading Roadmap");const s=document.getElementById("roadmap-container");if(!s){g.error("Something went wrong");return}try{await Qe(a,s),z.set("")}catch(h){console.error(h),g.error("Something went wrong")}},F=async()=>{const{response:s,error:h}=await se("https://api.roadmap.sh/v1-get-ai-roadmap-limit");if(h||!s){g.error(h?.message||"Something went wrong");return}const{limit:p,used:d,topicLimit:r,topicUsed:k}=s;n(p),B(d),K(r),ye(k)},le=async s=>{z.set("Loading Roadmap");const{response:h,error:p}=await se(`https://api.roadmap.sh/v1-get-ai-roadmap/${s}`);if(p||!h){g.error(p?.message||"Something went wrong"),m(!1);return}const{term:d,title:r,data:k}=h;await ne(k),A({id:s,title:r,term:d,data:k}),E(r||d),S(k),Ae(s)},Ne=t.useCallback(s=>{if(y)return;const h=s.target,{nodeId:p,nodeType:d,targetGroup:r,nodeTitle:k,parentTitle:$}=et(h)||{};if(!(!p||!d||!tt.includes(d)||!k)){if(d==="button"||d==="link-item"){const V=r?.dataset?.link||"";V.startsWith("http")?window.open(V,"_blank"):window.location.href=V;return}q({nodeId:p,nodeType:d,nodeTitle:k,...d==="subtopic"&&{parentTitle:$}})}},[y]);if(t.useEffect(()=>{F().finally(()=>{})},[]),t.useEffect(()=>{if(!j||G()){Z("rc");return}Ce(j),Z("rc"),D()},[]),t.useEffect(()=>{!b||b===N?.id||le(b).finally(()=>{z.set("")})},[b,N]),t.useEffect(()=>{const s=h=>{const{roadmapId:p,roadmapSlug:d}=h.state||{};if(!p||!d){window.location.reload();return}m(!0),f(!0),C(p),T(d),le(p).finally(()=>{m(!1),z.set("")})};return window.addEventListener("popstate",s),()=>{window.removeEventListener("popstate",s)}},[]),!v)return e.jsx(We,{roadmapTerm:a,setRoadmapTerm:E,handleSubmit:oe,limit:R,limitUsed:o,loadAIRoadmapLimit:F,isKeyOnly:J,onLoadTerm:s=>{E(s),X(s).finally(()=>{})}});const Se=`https://roadmap.sh/ai-roadmaps/${w}`,de=o<R||u,Re=L||l&&(!R||!a||o>=R&&!u||a===N?.term||J);return e.jsxs(e.Fragment,{children:[je&&e.jsx(fe,{onClose:()=>{Y(!1),F().finally(()=>null)}}),P&&N&&!y&&e.jsx(Ze,{nodeId:P.nodeId,nodeType:P.nodeType,nodeTitle:P.nodeTitle,parentTitle:P.parentTitle,onConfigureOpenAI:()=>{q(null),Y(!0)},onClose:()=>{q(null),F().finally(()=>{})},roadmapId:N?.id||"",topicLimit:O,topicLimitUsed:we,onTopicContentGenerateComplete:async()=>{await F()}}),e.jsxs("section",{className:"flex grow flex-col bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-center border-b bg-white py-3 sm:py-6",children:[y&&e.jsxs("span",{className:"flex items-center gap-2 rounded-full bg-black px-3 py-1 text-white",children:[e.jsx(ae,{isDualRing:!1,innerFill:"white"}),"Generating roadmap .."]}),!y&&e.jsxs("div",{className:"container flex grow flex-col items-start",children:[e.jsx(Ve,{}),J,l&&!u&&e.jsxs("div",{className:"mt-2 flex w-full flex-col items-start justify-between gap-2 text-sm sm:flex-row sm:items-center sm:gap-0",children:[e.jsxs("span",{children:[e.jsxs("span",{className:U("mr-0.5 inline-block rounded-xl border px-1.5 text-center text-sm tabular-nums text-gray-800",{"animate-pulse border-zinc-300 bg-zinc-300 text-zinc-300":!R}),children:[o," of ",R]})," ","roadmaps generated today."]}),e.jsxs("button",{onClick:()=>Y(!0),className:"rounded-xl border border-current px-2 py-0.5 text-left text-sm text-blue-500 transition-colors hover:bg-blue-400 hover:text-white",children:["Need to generate more?"," ",e.jsx("span",{className:"font-semibold",children:"Click here."})]})]}),!l&&e.jsx("button",{className:"mt-2 rounded-xl border border-current px-2.5 py-0.5 text-left text-sm font-medium text-blue-500 transition-colors hover:bg-blue-500 hover:text-white sm:text-center",onClick:D,children:"Login to generate your own roadmaps"}),e.jsxs("form",{onSubmit:oe,className:"my-3 flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-center",children:[e.jsx(be,{value:a,onValueChange:s=>E(s),placeholder:"e.g. Try searching for Ansible or DevOps",wrapperClassName:"grow",onSelect:(s,h)=>{X(h).finally(()=>null)}}),e.jsxs("button",{type:"submit",className:U("flex min-w-[127px] shrink-0 items-center justify-center gap-2 rounded-md bg-black px-4 py-2.5 text-white","disabled:cursor-not-allowed disabled:opacity-50"),onClick:s=>{l||(s.preventDefault(),D())},disabled:Re,children:[L&&e.jsx(e.Fragment,{children:e.jsx("span",{children:"Please wait.."})}),!L&&e.jsxs(e.Fragment,{children:[!l&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),l&&e.jsxs(e.Fragment,{children:[R>0&&de&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),R===0&&e.jsx("span",{children:"Please wait.."}),R>0&&!de&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{size:15,className:"mr-2"}),"Limit reached"]})]})]})]})]}),e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-md bg-yellow-400 py-1.5 pl-2.5 pr-3 text-xs font-medium transition-opacity duration-300 hover:bg-yellow-500 sm:text-sm",onClick:ve,children:[e.jsx(Be,{size:15}),"Download"]}),b&&e.jsx(Ge,{description:`Check out ${a} roadmap I generated on roadmap.sh`,pageUrl:Se})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-md bg-gray-200 py-1.5 pl-2.5 pr-3 text-xs font-medium text-black transition-colors duration-300 hover:bg-gray-300 sm:text-sm",onClick:async()=>{const s=await ie();s?.roadmapSlug&&(window.location.href=`/r/${s.roadmapSlug}`)},disabled:y,children:[e.jsx(He,{size:15}),e.jsx("span",{className:"hidden sm:inline",children:"Save and Start Learning"}),e.jsx("span",{className:"inline sm:hidden",children:"Start Learning"})]}),e.jsxs("button",{className:"hidden items-center justify-center gap-2 rounded-md bg-gray-200 py-1.5 pl-2.5 pr-3 text-xs font-medium text-black transition-colors duration-300 hover:bg-gray-300 sm:inline-flex sm:text-sm",onClick:async()=>{const s=await ie();s?.roadmapId&&window.open(`https://draw.roadmap.sh/${s?.roadmapId}`,"_blank")},disabled:y,children:[e.jsx(Ke,{size:15}),"Edit in Editor"]})]})]})]})]}),e.jsxs("div",{className:U({"relative mb-20 max-h-[800px] min-h-[800px] overflow-hidden sm:max-h-[1000px] md:min-h-[1000px] lg:max-h-[1200px] lg:min-h-[1200px]":!l}),children:[e.jsx("div",{ref:c,id:"roadmap-container",onClick:Ne,className:"relative min-h-[400px] px-4 py-5 [&>svg]:mx-auto [&>svg]:max-w-[1300px]"}),!l&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0",children:[e.jsx("div",{className:"h-80 w-full bg-linear-to-t from-gray-100 to-transparent"}),e.jsx("div",{className:"bg-gray-100",children:e.jsxs("div",{className:"mx-auto max-w-[600px] flex-col items-center justify-center bg-gray-100 px-5 pt-px",children:[e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("h2",{className:"mb-0.5 text-xl font-medium sm:mb-3 sm:text-2xl",children:"Sign up to View the full roadmap"}),e.jsx("p",{className:"mb-6 text-balance text-sm text-gray-600 sm:text-base",children:"You must be logged in to view the complete roadmap"})]}),e.jsxs("div",{className:"mx-auto max-w-[350px]",children:[e.jsx(qe,{type:"signup"}),e.jsxs("div",{className:"mt-6 text-center text-sm text-slate-600",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"font-medium text-blue-700 hover:text-blue-600",children:"Login"})]})]})]})})]})]})]})]})}export{cs as GenerateRoadmap};
