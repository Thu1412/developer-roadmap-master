import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{u as te}from"./index.CZrsCZXo.js";import{r as u}from"./index.DatCARk7.js";import{u as L}from"./use-toast.BdCcSTJE.js";import{b as _,h as se,d as K}from"./http.qJhOBTpO.js";import{g as G}from"./jwt.1xGNZsvU.js";import{a as ie,$ as J}from"./team.DdD-r4t5.js";import{c as A}from"./classname.y9b8gBZq.js";import{D as Q}from"./datetime.BHfGb2kO.js";import"./js.cookie.Cz0CWeBA.js";import{C as de}from"./CheckIcon.D4OhQ5l1.js";import{g as re}from"./date.DG5KCr4T.js";import{T as ce}from"./thumbs-up.CEv1GgFg.js";import{MarkFavorite as me}from"./MarkFavorite.y3wsV885.js";import{CreateRoadmapButton as ue}from"./CreateRoadmapButton.CisUx7xk.js";import{S as pe}from"./Spinner.CPY-6wbR.js";import{c as F}from"./createLucideIcon.uNyFMN5K.js";import{C as ae}from"./CreateRoadmapModal.D5FFZedp.js";import{M as H}from"./map.D6boQwTM.js";import{P as xe}from"./plus.CQTVuaoH.js";import{E as he}from"./eye.frvarAt2.js";import{F as ge}from"./folder-kanban.B8HzJa95.js";import{u as fe}from"./billing.CdvAGjKR.js";import{U as be}from"./UpgradeAccountModal.Bf1PhEwX.js";import{S as ve}from"./square-pen.oIdiM-Bb.js";import{G as je}from"./gift.ZPnr9qou.js";import{g as ye}from"./browser.3c2kCsRM.js";import{p as D}from"./page.DyYQD7MX.js";import{M as Y}from"./Modal.B1RqXaQs.js";import{A as we}from"./arrow-up-right.DMKR5D6V.js";import{C as X}from"./check.DCsIB_xO.js";import{B as Ne}from"./book-open.D6AjheEV.js";import{P as ke}from"./Pagination.BKvTuUXh.js";import{T as Z}from"./Tooltip.BP6rWEsy.js";import{u as q}from"./use-outside-click.f1LA7r1K.js";import{u as oe}from"./use-keydown.UQ-VttR1.js";import{ProgressShareButton as Ce}from"./ProgressShareButton.B7rep1aY.js";import{E as Te}from"./ellipsis-vertical.CxxBP93e.js";import{X as ne}from"./x.ZVxf9pxD.js";import{g as Ie}from"./number.al1uMBuK.js";import{R as Se}from"./RoadmapIcon.x-v-C98i.js";import{S as Ae}from"./shapes.CzUqgNib.js";import{U as Re}from"./users-round.D8gPFCPT.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./fp.esm.D_pnqQn4.js";import"./index.BHh4vvK5.js";import"./popup.CdCAhVM2.js";import"./transition.MUZrSsh7.js";import"./query-client.BXTfwa3d.js";import"./loader-circle.1OH4z0ap.js";import"./useQuery.BDS8a8wn.js";import"./query-http.YhxTqNi8.js";import"./useMutation.BrRqCquH.js";import"./UpdatePlanConfirmation.vVGIG51-.js";import"./VerifyUpgrade.DHdhu0dP.js";import"./circle-check-big.DD4Bg2zr.js";import"./zap.W9oJWPBR.js";import"./message-circle.gi35PKdE.js";import"./use-auth.Bw1nhFr_.js";import"./use-copy-text.DMdbdIxo.js";import"./ShareIcon._wHpzMFh.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]],Pe=F("chart-no-axes-gantt",$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]],Me=F("chevrons-down-up",De);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],Ee=F("chevrons-down",Fe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Le=F("chevrons-up-down",Ue);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],ze=F("chevrons-up",_e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qe=F("eye-off",Be);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],We=F("list-todo",Oe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],B=F("square-check-big",Ve);function Ge(){const[r,t]=u.useState({});return u.useEffect(()=>{const s=new URLSearchParams(window.location.search),a={};for(const[o,l]of s.entries())a[o]=l;t(a)},[]),r}function W(r){const{isActive:t,onClick:s,label:a,className:o,href:l,avatar:h,icon:m}=r,i=l?"a":"button";return e.jsxs(i,{onClick:s,className:A("flex h-[30px] shrink-0 items-center gap-1 rounded-md border border-slate-700 bg-slate-800 p-1.5 pl-2 pr-3 text-sm leading-none text-gray-400 transition-colors hover:bg-slate-700",t?"border-slate-200 bg-slate-200 text-gray-900 hover:bg-slate-200":"",o),...l?{href:l}:{},children:[h&&e.jsx("img",{src:h,alt:"avatar",className:"mr-0.5 h-4 w-4 rounded-full object-cover"}),m,a]})}function He(r,t){return t&&t!=="questions"?`undefined/${t}/${r}`:t?`/${t}/${r}`:`/guides/${r}`}function Ye(r){const{guide:t}=r,{title:s,slug:a,publishedAt:o,roadmapId:l}=t;let h="Textual";l==="questions"&&(h="Question");const m=o?Q.fromJSDate(new Date(o)):null,i=m&&Q.now().diff(m,"days").days<15,d=m?m.toFormat("MMMM"):"";return e.jsxs("a",{className:"text-md group flex items-center justify-between border-b py-2 text-gray-600 no-underline hover:text-blue-600",href:He(a,l),children:[e.jsxs("span",{className:"text-sm transition-transform group-hover:translate-x-2 md:text-base",children:[s,i&&e.jsxs("span",{className:"ml-2.5 rounded-xs bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-900 uppercase",children:["New",e.jsxs("span",{className:"hidden sm:inline",children:[" · ",d]})]})]}),e.jsx("span",{className:"hidden text-xs text-gray-500 capitalize sm:block",children:h}),e.jsx("span",{className:"block text-xs text-gray-400 sm:hidden",children:" »"})]})}function Ke(r){const{heading:t,guides:s,questions:a=[]}=r,o=[...s,...a].sort((l,h)=>{const m=new Date(l.publishedAt??new Date);return new Date(h.publishedAt??new Date).getTime()-m.getTime()});return e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"block text-2xl font-bold sm:text-3xl",children:t}),e.jsx("div",{className:"mt-3 sm:my-5",children:o.map(l=>e.jsx(Ye,{guide:l},l._id))}),e.jsx("a",{href:"/guides",className:"hidden rounded-full bg-linear-to-r from-slate-600 to-black px-3 py-2 text-xs font-medium text-white transition-colors hover:from-blue-600 hover:to-blue-800 sm:inline",children:"View All Guides →"}),e.jsx("div",{className:"mt-3 block sm:hidden",children:e.jsx("a",{href:"/guides",className:"font-regular block rounded-md border border-black p-2 text-center text-sm text-black hover:bg-black hover:text-gray-50",children:"View All Guides  →"})})]})}function Je(r){const{video:t}=r,{frontmatter:s,id:a}=t;return e.jsxs("a",{className:"block no-underline py-2 group text-md items-center text-gray-600 hover:text-blue-600 flex justify-between border-b",href:`/videos/${a}`,children:[e.jsxs("span",{className:"group-hover:translate-x-2 transition-transform",children:[s.title,s.isNew&&e.jsxs("span",{className:"bg-green-300 text-green-900 text-xs font-medium px-1.5 py-0.5 rounded-xs uppercase ml-1.5",children:["New",e.jsxs("span",{className:"hidden sm:inline",children:["·",new Date(s.date).toLocaleString("default",{month:"long"})]})]})]}),e.jsx("span",{className:"capitalize text-gray-500 text-xs hidden sm:block",children:s.duration}),e.jsx("span",{className:"text-gray-400 text-xs block sm:hidden",children:" »"})]})}function Qe(r){const{heading:t,videos:s}=r;return e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"block text-2xl font-bold sm:text-3xl",children:t}),e.jsx("div",{className:"mt-3 sm:my-5",children:s.map(a=>e.jsx(Je,{video:a},a.id))}),e.jsx("a",{href:"/videos",className:"hidden rounded-full bg-linear-to-r from-slate-600 to-black px-3 py-2 text-xs font-medium text-white transition-colors hover:from-blue-600 hover:to-blue-800 sm:inline",children:"View All Videos →"}),e.jsx("div",{className:"mt-3 block sm:hidden",children:e.jsx("a",{href:"/videos",className:"font-regular block rounded-md border border-black p-2 text-center text-sm text-black hover:bg-black hover:text-gray-50",children:"View All Videos  →"})})]})}function Xe({project:r}){return e.jsxs("a",{href:`/projects/${r.projectId}`,className:"group relative flex flex-col justify-between gap-2 rounded-md border border-slate-800 bg-slate-900 p-3.5 hover:border-slate-600",children:[e.jsxs("div",{className:"relative z-10 flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"truncate font-medium text-slate-300 group-hover:text-slate-100",children:r.title}),e.jsx("span",{className:A("absolute -right-2 -top-2 flex shrink-0 items-center gap-1 rounded-full text-xs uppercase tracking-wide",{"text-green-600/50":r.submittedAt&&r.repositoryUrl,"text-yellow-600":!r.submittedAt||!r.repositoryUrl}),children:r.submittedAt&&r.repositoryUrl?"Done":""})]}),e.jsxs("div",{className:"relative z-10 flex items-center gap-2 text-xs text-slate-400",children:[r.submittedAt&&r.repositoryUrl&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"h-3 w-3"}),r.upvotes]}),r.startedAt&&e.jsxs("span",{children:["Started ",re(r.startedAt)]})]}),e.jsx("div",{className:"absolute inset-0 rounded-md bg-linear-to-br from-slate-800/50 via-transparent to-transparent"}),r.submittedAt&&r.repositoryUrl&&e.jsx("div",{className:"absolute inset-0 rounded-md bg-linear-to-br from-green-950/20 via-transparent to-transparent"})]})}function U(r){const{url:t,percentageDone:s,resourceType:a,resourceId:o,resourceTitle:l,isFavorite:h,allowFavorite:m=!0,isTrackable:i=!0,isNew:d=!1}=r;return e.jsxs("a",{href:t,className:A("relative flex flex-col overflow-hidden rounded-md border p-3 text-sm text-slate-400 hover:text-slate-300",{"border-slate-800 bg-slate-900 hover:border-slate-600":i,"border-slate-700/50 bg-slate-800/50 hover:border-slate-600/70":!i}),children:[e.jsx("span",{title:l,className:"relative z-20 truncate",children:l}),i&&e.jsx("span",{className:"absolute bottom-0 left-0 top-0 z-10 bg-[#172a3a]",style:{width:`${s}%`}}),m&&e.jsx(me,{resourceId:o,resourceType:a,favorite:h}),d&&e.jsxs("span",{className:"absolute bottom-1.5 right-2 flex items-center rounded-br rounded-tl text-xs font-medium text-purple-300",children:[e.jsxs("span",{className:"mr-1.5 flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-purple-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-purple-500"})]}),"New"]})]})}function Ze(r){const{isLoading:t=!1,title:s,icon:a,rightContent:o,isCollapsed:l=!1,onToggleCollapse:h,isEmpty:m=!1,emptyTitle:i}=r;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("p",{onClick:h,className:"flex items-center cursor-default gap-0.5 text-sm text-gray-400",children:[!t&&a,t&&e.jsx("span",{className:"mr-1.5",children:e.jsx(pe,{})}),m&&i||s]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[!l&&o,!t&&!m&&e.jsxs("button",{onClick:h,className:A("ml-2 inline-flex items-center gap-1 rounded-md bg-slate-800 py-0.5 pl-1 pr-1.5 text-xs uppercase tracking-wider text-slate-400 hover:bg-slate-700",{"bg-slate-800 text-slate-500 hover:bg-slate-800 hover:text-slate-400":!l}),children:[l&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-3.5 w-3.5"})," Expand"]}),!l&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-3.5 w-3.5"})," Collapse"]})]})]})]})}function V(r){const{icon:t,isLoading:s=!1,isEmpty:a=!1,emptyTitle:o,title:l,rightContent:h,children:m,className:i}=r,d=`hero-group-${l}-collapsed`,[g,w]=u.useState(!0);function n(){return localStorage.getItem(d)==="true"}u.useEffect(()=>{w(n())},[s]);const v=s||g||a;return e.jsx("div",{className:A("border-b border-gray-800/50",{"py-4":!v,"py-4 ":v},i),children:e.jsxs("div",{className:"container",children:[e.jsx(Ze,{icon:t,isLoading:s,isEmpty:a,emptyTitle:o,title:l,rightContent:h,isCollapsed:g,onToggleCollapse:()=>{w(!g),localStorage.setItem(d,(!g).toString())}}),!v&&e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2.5 sm:grid-cols-2 md:grid-cols-3",children:m})]})})}function et(r){const{progress:t,isLoading:s,customRoadmaps:a,projects:o}=r,[l,h]=u.useState(!1),[m,i]=u.useState(!1),d=o.filter(n=>n.submittedAt&&n.repositoryUrl),w=[...o.filter(n=>!n.submittedAt||!n.repositoryUrl),...l?d:[]];return e.jsxs("div",{className:"flex flex-col",children:[m&&e.jsx(ae,{onClose:()=>{i(!1)}}),e.jsx(V,{icon:e.jsx(de,{additionalClasses:"mr-1.5 h-[14px] w-[14px]"}),isLoading:s,title:"Your progress and bookmarks",isEmpty:!s&&t.length===0,emptyTitle:e.jsxs(e.Fragment,{children:["No bookmarks found",e.jsxs("a",{href:"#role-based-roadmaps",className:"ml-1.5 inline-flex items-center gap-1 font-medium text-blue-500 underline-offset-2 hover:underline",children:[e.jsx(B,{className:"size-3.5",strokeWidth:2.5}),"Bookmark a roadmap"]})]}),children:t.map(n=>e.jsx(U,{resourceId:n.resourceId,resourceType:n.resourceType,resourceTitle:n.resourceTitle,isFavorite:n.isFavorite,percentageDone:(n.skipped+n.done)/n.total*100,url:n.resourceType==="roadmap"?`/${n.resourceId}`:`/best-practices/${n.resourceId}`},`${n.resourceType}-${n.resourceId}`))}),e.jsxs(V,{icon:e.jsx(H,{className:"mr-1.5 h-[14px] w-[14px]"}),isLoading:s,title:"Your custom roadmaps",isEmpty:!s&&a.length===0,emptyTitle:e.jsxs(e.Fragment,{children:["No custom roadmaps found",e.jsxs("button",{onClick:()=>{i(!0)},className:"ml-1.5 inline-flex items-center gap-1 font-medium text-blue-500 underline-offset-2 hover:underline",children:[e.jsx(B,{className:"size-3.5",strokeWidth:2.5}),"Create custom roadmap"]})]}),children:[a.map(n=>e.jsx(U,{resourceId:n.resourceId,resourceType:"roadmap",resourceTitle:n.resourceTitle,percentageDone:(n.skipped+n.done)/n.total*100,url:`/r/${n?.roadmapSlug}`,allowFavorite:!1},n.resourceId)),e.jsx(ue,{existingRoadmapCount:a.length})]}),e.jsxs(V,{icon:e.jsx(ge,{className:"mr-1.5 h-[14px] w-[14px]"}),isLoading:s,title:"Your active projects",isEmpty:!s&&w.length===0,emptyTitle:e.jsxs(e.Fragment,{children:["No active projects found",e.jsxs("a",{href:"/projects",className:"ml-1.5 inline-flex items-center gap-1 font-medium text-blue-500 underline-offset-2 hover:underline",children:[e.jsx(B,{className:"size-3.5",strokeWidth:2.5}),"Start a new project"]})]}),rightContent:d.length>0&&e.jsxs("button",{onClick:()=>h(!l),className:"hidden items-center gap-2 rounded-md text-xs text-slate-400 hover:text-slate-300 sm:flex",children:[l?e.jsx(qe,{className:"h-3.5 w-3.5"}):e.jsx(he,{className:"h-3.5 w-3.5"}),d.length," Completed"]}),className:"border-b-0",children:[w.map(n=>e.jsx(Xe,{project:n},n._id)),e.jsxs("a",{href:"/projects",className:"flex min-h-[80px] items-center justify-center gap-2 rounded-md border border-dashed border-slate-800 p-4 text-sm text-slate-400 hover:border-slate-600 hover:bg-slate-900/50 hover:text-slate-300",children:[e.jsx(xe,{size:16}),"Start a new project"]})]})]})}const tt=[{title:"Frontend",id:"frontend"},{title:"Backend",id:"backend"},{title:"DevOps",id:"devops"}];function st(r){const{isLoading:t}=r,{isPaidUser:s,isLoading:a}=fe(),[o,l]=u.useState(!1);return s?null:e.jsxs(e.Fragment,{children:[o&&e.jsx(be,{onClose:()=>l(!1)}),e.jsxs("button",{onClickCapture:()=>l(!0),className:A("flex items-center gap-1.5 rounded-lg bg-white py-1.5 pr-3 pl-2.5 text-xs text-purple-700 duration-200 hover:bg-purple-600 hover:text-white",{"striped-loader-slate striped-loader-slate-fast border-transparent bg-slate-800/50 text-transparent hover:bg-transparent hover:text-transparent hover:shadow-none":t||a}),onClick:()=>{},children:[e.jsx(je,{size:16,className:A({"text-transparent":t})}),e.jsx("span",{children:"Upgrade Account"})]})]})}function rt(r){const{isLoading:t,name:s,username:a,avatar:o}=r;return t||!a?e.jsxs("a",{href:"/account/update-profile",className:A("flex items-center gap-2 rounded-lg bg-slate-800/50 py-2 pr-3 pl-3 font-medium outline-slate-700 hover:bg-slate-800 hover:outline-slate-400",{"striped-loader-slate striped-loader-slate-fast text-transparent":t,"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20":!t}),children:[e.jsx(B,{className:"h-4 w-4",strokeWidth:2.5}),"Set up your profile"]}):e.jsxs("div",{className:"flex gap-1.5",children:[e.jsxs("a",{href:`/u/${a}`,className:"flex items-center gap-2 rounded-lg bg-slate-800/50 py-2 pr-3 pl-3 text-slate-300 transition-colors hover:bg-slate-800/70",children:[e.jsx("img",{src:o,alt:s||"Profile",className:"h-5 w-5 rounded-full ring-1 ring-slate-700"}),e.jsx("span",{className:"font-medium",children:"Visit Profile"})]}),e.jsx("a",{href:"/account/update-profile",className:"flex items-center gap-2 rounded-lg bg-slate-800/50 py-2 pr-3 pl-3 text-slate-400 transition-colors hover:bg-slate-800/70 hover:text-slate-300",title:"Edit Profile",children:e.jsx(ve,{className:"h-4 w-4"})})]})}function at(r){const{isLoading:t,profile:s}=r;return e.jsx("div",{className:"container mb-3 flex flex-col gap-4 pt-6 pb-2 text-sm text-slate-400 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex w-full flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(rt,{isLoading:t,name:s.name,username:s.username,avatar:s.avatar}),e.jsx("div",{className:"hidden flex-wrap items-center gap-2 md:flex",children:e.jsx(st,{isLoading:t})})]})})}function ot(r){const{builtInRoleRoadmaps:t=[],builtInBestPractices:s=[],builtInSkillRoadmaps:a=[],guides:o=[],videos:l=[]}=r,h=L(),[m,i]=u.useState(!0),[d,g]=u.useState(),[w,n]=u.useState([]);async function v(){const{response:c,error:N}=await _("https://api.roadmap.sh/v1-user-dashboard");N||!c||(c?.progresses?.forEach(k=>{window.dispatchEvent(new CustomEvent("mark-favorite",{detail:{resourceId:k.resourceId,resourceType:k.resourceType,isFavorite:k.isFavorite}}))}),g(c))}async function f(){const{error:c,response:N}=await _("/pages.json");if(c){h.error(c.message||"Something went wrong");return}if(!N)return[];const k=N.filter(S=>S.group==="Projects");n(k)}u.useEffect(()=>{Promise.allSettled([v(),f()]).finally(()=>i(!1))},[]),u.useEffect(()=>(window.addEventListener("refresh-favorites",v),()=>window.removeEventListener("refresh-favorites",v)),[]);const p=(d?.progresses||[]).filter(c=>!c.isCustomResource).sort((c,N)=>{const k=new Date(c.updatedAt),S=new Date(N.updatedAt);return c.isFavorite&&!N.isFavorite?-1:!c.isFavorite&&N.isFavorite?1:S.getTime()-k.getTime()}),y=(d?.progresses||[]).filter(c=>c.isCustomResource).sort((c,N)=>{const k=new Date(c.updatedAt);return new Date(N.updatedAt).getTime()-k.getTime()}),{avatar:x,name:b}=d||{},T=x?`https://dodrc8eu8m09s.cloudfront.net/avatars/${x}`:"/img/default-avatar.png",C=d?.projects.map(c=>{const N=w.find(k=>k.id===c.projectId);return{...c,title:N?.title||"N/A"}}).sort((c,N)=>c.repositoryUrl&&!N.repositoryUrl?1:!c.repositoryUrl&&N.repositoryUrl?-1:0),{username:I}=d||{};return e.jsxs("div",{children:[e.jsx(at,{profile:{name:b,username:I,avatar:T,isLoading:m},isLoading:m}),e.jsx(et,{progress:p,customRoadmaps:y,projects:C||[],isLoading:m}),e.jsxs("div",{className:"bg-linear-to-b from-slate-900 to-black pb-12",children:[e.jsx("div",{className:"relative mt-6 border-t border-t-[#1e293c] pt-12",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{id:"role-based-roadmaps",className:"text-md font-regular absolute -top-[17px] left-4 flex rounded-lg border border-[#1e293c] bg-slate-900 px-3 py-1 text-slate-400 sm:left-1/2 sm:-translate-x-1/2",children:"Role Based Roadmaps"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 px-2 sm:grid-cols-2 sm:px-0 lg:grid-cols-3",children:t.map(c=>{const N=p.find(S=>S.resourceId===c.id),k=((N?.skipped||0)+(N?.done||0))/(N?.total||1)*100;return e.jsx(U,{resourceId:c.id,resourceType:"roadmap",resourceTitle:c.title,isFavorite:c.isFavorite,percentageDone:k,isNew:c.isNew,url:`/${c.id}`},c.id)})})]})}),e.jsx("div",{className:"relative mt-12 border-t border-t-[#1e293c] pt-12",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-md font-regular absolute -top-[17px] left-4 flex rounded-lg border border-[#1e293c] bg-slate-900 px-3 py-1 text-slate-400 sm:left-1/2 sm:-translate-x-1/2",children:"Skill Based Roadmaps"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 px-2 sm:grid-cols-2 sm:px-0 lg:grid-cols-3",children:a.map(c=>{const N=p.find(S=>S.resourceId===c.id),k=((N?.skipped||0)+(N?.done||0))/(N?.total||1)*100;return e.jsx(U,{resourceId:c.id,resourceType:"roadmap",resourceTitle:c.title,isFavorite:c.isFavorite,percentageDone:k,isNew:c.isNew,url:`/${c.id}`},c.id)})})]})}),e.jsx("div",{className:"relative mt-12 border-t border-t-[#1e293c] pt-12",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-md font-regular absolute -top-[17px] left-4 flex rounded-lg border border-[#1e293c] bg-slate-900 px-3 py-1 text-slate-400 sm:left-1/2 sm:-translate-x-1/2",children:"Project Ideas"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 px-2 sm:grid-cols-2 sm:px-0 lg:grid-cols-3",children:tt.map(c=>e.jsx(U,{percentageDone:0,resourceId:c.id,resourceType:"roadmap",resourceTitle:c.title,url:`/${c.id}/projects`,allowFavorite:!1},c.id))})]})}),e.jsx("div",{className:"relative mt-12 border-t border-t-[#1e293c] pt-12",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-md font-regular absolute -top-[17px] left-4 flex rounded-lg border border-[#1e293c] bg-slate-900 px-3 py-1 text-slate-400 sm:left-1/2 sm:-translate-x-1/2",children:"Best Practices"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 px-2 sm:grid-cols-2 sm:px-0 lg:grid-cols-3",children:s.map(c=>{const N=p.find(S=>S.resourceId===c.id),k=((N?.skipped||0)+(N?.done||0))/(N?.total||1)*100;return e.jsx(U,{resourceId:c.id,resourceType:"best-practice",resourceTitle:c.title,isFavorite:c.isFavorite,percentageDone:k,isNew:c.isNew,url:`/best-practices/${c.id}`},c.id)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 bg-gray-50 px-4 py-5 sm:gap-16 sm:px-0 sm:py-16",children:[e.jsx(Ke,{heading:"Guides",guides:o.slice(0,15),questions:o.filter(c=>c.roadmapId==="questions").slice(0,15)}),e.jsx(Qe,{heading:"Videos",videos:l})]})]})}function E(r){const{topicTitles:t,onSelectActivity:s,className:a}=r,[o,l]=u.useState(!1),h=t.slice(0,o?t.length:3),m=t.length>3;return e.jsxs("div",{className:A("flex flex-wrap gap-1 text-sm font-normal text-gray-600",a),children:[h.map((i,d)=>e.jsx("span",{className:"rounded-md bg-gray-200 px-1.5",children:i},d)),m&&!o&&e.jsx("button",{onClick:()=>l(!o),className:"bg-white border border-black text-black rounded-md px-1.5 hover:bg-black text-xs h-[20px] hover:text-white",children:o?"- Show less":`+${t.length-3}`})]})}function nt(r){const{user:t,onTopicClick:s,teamId:a}=r,{activities:o}=t,l=te(ie),[h,m]=u.useState(!1),i=p=>{const{resourceId:y,resourceTitle:x,resourceType:b,isCustomResource:T,resourceSlug:C}=p,I=b==="question"?`/questions/${y}`:b==="best-practice"?`/best-practices/${y}`:T&&b==="roadmap"?`/r/${C}`:`/${y}`;return e.jsx("a",{className:"font-medium underline transition-colors hover:cursor-pointer hover:text-black",target:"_blank",href:`${I}?t=${a}`,children:x})},d=p=>e.jsx("span",{className:"ml-1 text-xs text-gray-400",children:re(new Date(p).toISOString(),!0)}),g=t.avatar?`https://dodrc8eu8m09s.cloudfront.net/avatars/${t.avatar}`:"/img/default-avatar.png",w=l?.personalProgressOnly&&l.role==="member"&&t.memberId!==l.memberId,n=e.jsxs("a",{href:`/team/member?t=${a}&m=${t?.memberId}`,className:A("inline-flex items-center gap-1.5 underline underline-offset-2 hover:underline",w?"pointer-events-none cursor-default no-underline":""),onClick:p=>{w&&p.preventDefault()},"aria-disabled":w,children:[e.jsx("img",{className:"inline-block h-5 w-5 rounded-full",src:g,alt:t.name}),e.jsx("span",{className:"font-medium",children:t?.name||"Unknown"})]});if(o.length===1){const p=o[0],{actionType:y,topicTitles:x}=p,b=x?.length||0;return e.jsxs("li",{className:"flex flex-wrap items-center gap-1 rounded-md border px-2 py-2.5 text-sm bg-white",children:[y==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1 flex w-full flex-wrap items-center",children:[n," started ",b," topic",b>1?"s":""," in ",i(p)," ",d(p.updatedAt)]}),e.jsx(E,{className:"pl-5",topicTitles:x||[]})]}),y==="done"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1 flex w-full flex-wrap items-center",children:[n," completed ",b," topic",b>1?"s":""," in ",i(p)," ",d(p.updatedAt)]}),e.jsx(E,{className:"pl-5",topicTitles:x||[]})]}),y==="answered"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1 flex w-full flex-wrap items-center",children:[n," answered ",b," question",b>1?"s":""," in ",i(p)," ",d(p.updatedAt)]}),e.jsx(E,{className:"pl-5",topicTitles:x||[]})]})]},t._id)}const v=new Set(o.map(p=>p.resourceId)).size,f=h?o.length:5;return e.jsxs("li",{className:"overflow-hidden bg-white rounded-md border",children:[e.jsxs("h3",{className:"flex flex-wrap items-center gap-1 bg-gray-100 px-2 py-2.5 text-sm",children:[n," has ",o.length," updates in ",v," resource(s)"]}),e.jsxs("div",{className:"py-3",children:[e.jsx("ul",{className:"ml-2 flex flex-col divide-y pr-2 sm:ml-[36px]",children:o.slice(0,f).map((p,y)=>{const{actionType:x,topicTitles:b}=p,T=b?.length||0;return e.jsxs("li",{className:A("text-sm text-gray-600",y===0?"pb-2.5":"py-2.5",y===o.length-1?"pb-0":""),children:[x==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1",children:["Started ",T," topic",T>1?"s":""," in ",i(p)," ",d(p.updatedAt)]}),e.jsx(E,{topicTitles:b||[]})]}),x==="done"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1",children:["Completed ",T," topic",T>1?"s":""," in ",i(p)," ",d(p.updatedAt)]}),e.jsx(E,{topicTitles:b||[]})]}),x==="answered"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1",children:["Answered ",T," question",T>1?"s":""," in ",i(p)," ",d(p.updatedAt)]}),e.jsx(E,{topicTitles:b||[]})]})]},p._id)})}),o.length>5&&e.jsx("button",{className:"ml-2 mt-3 flex items-center gap-2 rounded-md border border-gray-300 p-1 text-xs uppercase tracking-wide text-gray-600 transition-colors hover:border-black hover:bg-black hover:text-white sm:ml-[36px]",onClick:()=>m(!h),children:h?e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:14}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:14}),"Show more"]})})]})]},t._id)}function lt(r){const{activity:t,onClose:s}=r,{resourceId:a,resourceType:o,isCustomResource:l,topicTitles:h=[],actionType:m}=t;let i="";return o==="roadmap"?i=l?`/r/${a}`:`/${a}`:o==="best-practice"?i=`/best-practices/${a}`:i=`/questions/${a}`,e.jsx(Y,{onClose:()=>{s()},children:e.jsxs("div",{className:"popup-body relative rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("span",{className:"mb-2 flex items-center justify-between text-lg font-semibold capitalize",children:[e.jsx("span",{className:"flex items-center gap-2",children:m.replace("_"," ")}),e.jsxs("a",{href:i,target:"_blank",className:"flex items-center gap-1 rounded-md border border-transparent py-0.5 pl-2 pr-1 text-sm font-normal text-gray-400 transition-colors hover:border-black hover:bg-black hover:text-white",children:["Visit Page"," ",e.jsx(we,{size:16,strokeWidth:2,className:"relative top-px"})]})]}),e.jsx("ul",{className:"flex max-h-[50vh] flex-col gap-1 overflow-y-auto max-md:max-h-full",children:h.map(d=>{const g=m==="done"?X:m==="in_progress"?Ne:X;return e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(g,{strokeWidth:3,className:"relative top-[4px] text-green-500",size:16}),d]},d)})})]})})}function it(r){const{teamId:t}=r;return e.jsx("div",{className:"rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center p-7 text-center sm:p-14",children:[e.jsx(We,{className:"mb-4 h-14 w-14 opacity-10"}),e.jsx("h2",{className:"text-lg font-semibold sm:text-lg",children:"No Activity"}),e.jsx("p",{className:"my-1 max-w-[400px] text-balance text-sm text-gray-500 sm:my-2 sm:text-base",children:"Team activity will appear here once members start tracking their progress."})]})})}function dt(r){const{teamId:t,canManageCurrentTeam:s=!1}=r,{t:a=t}=ye(),o=L(),[l,h]=u.useState(!0),[m,i]=u.useState(null),[d,g]=u.useState({data:{users:[],activities:[]},totalCount:0,totalPages:0,currPage:1,perPage:21}),[w,n]=u.useState(1),v=async(C=1)=>{const{response:I,error:c}=await _(`https://api.roadmap.sh/v1-get-team-activity/${a}`,{currPage:C});if(c||!I){o.error(c?.message||"Failed to get team activity");return}g(I),n(I.currPage)};u.useEffect(()=>{a&&(h(!0),g({data:{users:[],activities:[]},totalCount:0,totalPages:0,currPage:1,perPage:21}),n(1),v().then(()=>{D.set(""),h(!1)}))},[a]);const{users:f,activities:p}=d?.data,y=u.useMemo(()=>p?.filter(C=>C.activity.length>0&&C.activity.some(I=>(I?.topicTitles?.length||0)>0)),[p]),x=u.useMemo(()=>new Set(y?.map(C=>new Date(C.createdAt).setHours(0,0,0,0)).sort((C,I)=>new Date(I).getTime()-new Date(C).getTime())),[y]),b=u.useMemo(()=>{const C=[];for(const I of x){const c=y.filter(k=>new Date(k.createdAt).setHours(0,0,0,0)===I),N=f.map(k=>{const S=c.filter(R=>R.userId===k._id).flatMap(R=>R.activity).filter(R=>(R?.topicTitles?.length||0)>0).sort((R,j)=>new Date(j.updatedAt).getTime()-new Date(R.updatedAt).getTime());return{...k,activities:S}}).filter(k=>k.activities.length>0).sort((k,S)=>new Date(S.activities[0].updatedAt).getTime()-new Date(k.activities[0].updatedAt).getTime());C.push(...N)}return C},[f,p]),T=e.jsxs("h3",{className:"mb-3 flex h-[20px] w-full items-center justify-between text-xs uppercase text-gray-400",children:["Team Activity",e.jsx("span",{className:"mx-3 h-[1px] grow bg-gray-200"}),s&&e.jsxs("a",{href:`/team/progress?t=${a}`,className:"flex flex-row items-center rounded-full bg-gray-400 px-2.5 py-0.5 text-xs text-white transition-colors hover:bg-black",children:[e.jsx(Pe,{className:"mr-1.5 size-3",strokeWidth:2.5}),"Progresses"]})]});if(l)return e.jsxs(e.Fragment,{children:[T,e.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:4}).map((C,I)=>e.jsx("div",{className:"h-[70px] w-full animate-pulse rounded-lg border bg-gray-100"},I))})]});if(!a)if(typeof window<"u")window.location.href="/";else return null;return e.jsxs(e.Fragment,{children:[m&&e.jsx(lt,{activity:m,onClose:()=>i(null)}),b.length>0?e.jsxs(e.Fragment,{children:[T,e.jsx("ul",{className:"mb-4 mt-2 flex flex-col gap-3",children:b.map((C,I)=>e.jsx(nt,{user:C,teamId:a,onTopicClick:i},`${C._id}-${I}`))}),e.jsx(ke,{currPage:w,totalPages:d.totalPages,totalCount:d.totalCount,perPage:d.perPage,onPageChange:C=>{n(C),D.set("Loading..."),v(C).finally(()=>{D.set("")})}})]}):e.jsxs(e.Fragment,{children:[T,e.jsx("div",{className:"rounded-lg border bg-white p-4",children:e.jsx(it,{teamId:a})})]})]})}function ct(r){const{userId:t,resourceType:s,resourceId:a,isCustomResource:o,showClearButton:l=!0,onCleared:h}=r,m=L(),i=u.useRef(null),[d,g]=u.useState(!1),[w,n]=u.useState(!1),[v,f]=u.useState(!1);async function p(){n(!0);const{error:y,response:x}=await se("https://api.roadmap.sh/v1-clear-resource-progress",{resourceId:a,resourceType:s});if(y||!x){m.error("Error clearing progress. Please try again."),console.error(y),n(!1);return}localStorage.removeItem(`${s}-${a}-${t}-favorite`),localStorage.removeItem(`${s}-${a}-${t}-progress`),n(!1),f(!1),h&&h()}return q(i,()=>{g(!1)}),oe("Escape",()=>{g(!1)}),e.jsxs("div",{className:"relative h-full",ref:i,children:[e.jsx("button",{className:"h-full text-gray-400 hover:text-gray-700",onClick:()=>g(!d),children:e.jsx(Te,{size:16})}),d&&e.jsxs("div",{className:"absolute right-0 top-8 z-10 w-48 overflow-hidden rounded-md border border-gray-200 bg-white shadow-lg",children:[e.jsx(Ce,{resourceType:s,resourceId:a,isCustomResource:o,className:"w-full gap-1.5 p-2 hover:bg-gray-100"}),l&&e.jsxs(e.Fragment,{children:[!v&&e.jsx("button",{className:"flex w-full items-center gap-1.5 p-2 text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-black disabled:cursor-not-allowed disabled:opacity-70",onClick:()=>f(!0),disabled:w,children:w?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-3.5 w-3.5"}),"Clear Progress"]})}),v&&e.jsxs("span",{className:"flex w-full items-center justify-between gap-1.5 p-2 text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-black disabled:cursor-not-allowed disabled:opacity-70",children:["Are you sure?",e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p,className:"text-red-500 underline hover:text-red-800",children:"Yes"}),e.jsx("button",{onClick:()=>f(!1),className:"text-red-500 underline hover:text-red-800",children:"No"})]})]})]})]})]})}function mt(r){const{showClearButton:t=!0,isCustomResource:s,showActions:a=!0,onResourceClick:o}=r,l=G()?.id,{updatedAt:h,resourceType:m,resourceId:i,title:d,totalCount:g,learningCount:w,doneCount:n,skippedCount:v,onCleared:f,roadmapSlug:p}=r;let y=m==="roadmap"?`/${i}`:`/best-practices/${i}`;s&&(y=`/r/${p}`);const x=n+v,b=Ie(x,g),T=o?"button":"a";return e.jsxs("div",{className:"relative",children:[e.jsxs(T,{...o?{onClick:o}:{href:y,target:"_blank"},className:A("group relative flex w-full items-center justify-between overflow-hidden rounded-md border border-gray-300 bg-white px-3 py-2 text-left text-sm transition-all hover:border-gray-400",a?"pr-7":""),children:[e.jsx("span",{className:"grow truncate",children:d}),e.jsxs("span",{className:"text-xs text-gray-400",children:[parseInt(b,10),"%"]}),e.jsx("span",{className:"absolute left-0 top-0 block h-full cursor-pointer rounded-tl-md bg-black/5 transition-colors group-hover:bg-black/10",style:{width:`${b}%`}})]}),a&&e.jsx("div",{className:"absolute right-2 top-0 flex h-full items-center",children:e.jsx(ct,{userId:l,resourceType:m,resourceId:i,isCustomResource:s,onCleared:f,showClearButton:t})})]})}function ut(r){return e.jsx("div",{className:"grid grid-cols-1 gap-1.5 sm:grid-cols-3",children:Array.from({length:6}).map((t,s)=>e.jsx("div",{className:"h-[38px] w-full animate-pulse rounded-md border border-gray-300 bg-gray-100"},s))})}function pt(r){const{onClose:t,showDefaultRoadmapsModal:s,showCreateCustomRoadmapModal:a}=r;return e.jsxs(Y,{onClose:t,bodyClassName:"p-4",children:[e.jsx("h2",{className:"mb-0.5 text-left text-2xl font-semibold",children:"Pick an Option"}),e.jsx("p",{className:"text-left text-sm text-gray-500 mb-4",children:"Choose from default roadmaps or create from scratch."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{className:"text-base flex items-center rounded-md border border-gray-300 p-2 px-4 text-left font-medium hover:bg-gray-100",onClick:s,children:[e.jsx(H,{className:"mr-2 inline-block",size:20}),"Use a Default Roadmap"]}),e.jsxs("button",{className:"text-base flex items-center rounded-md border border-gray-300 p-2 px-4 text-left font-medium hover:bg-gray-100",onClick:a,children:[e.jsx(Ae,{className:"mr-2 inline-block",size:20}),"Create from Scratch"]})]})]})}function ee(r){const{isSelected:t,onClick:s,title:a}=r;return e.jsxs("button",{className:`group flex min-h-[35px] items-stretch overflow-hidden rounded-md text-sm ${t?"bg-black text-white transition-colors hover:bg-gray-700":"border border-gray-300 hover:bg-gray-100"}`,onClick:s,children:[e.jsx("span",{className:"flex items-center px-3",children:a}),t&&e.jsx("span",{className:"flex items-center bg-gray-700 px-3 text-xs text-white transition-colors",children:"×"}),!t&&e.jsx("span",{className:"flex items-center bg-gray-100 px-2.5 text-xs text-gray-500",children:"+"})]})}function xt(r){const{onClose:t,allRoadmaps:s,onRoadmapAdd:a,onRoadmapRemove:o,teamResourceConfig:l}=r,h=u.useRef(null),m=u.useRef(null),[i,d]=u.useState(s),[g,w]=u.useState("");oe("Escape",()=>{t()}),q(h,()=>{t()}),u.useEffect(()=>{m.current&&m.current.focus()},[m]),u.useEffect(()=>{if(g.length===0){d(s);return}const f=s.filter(p=>p.title.toLowerCase().includes(g.toLowerCase())||p.id.toLowerCase().includes(g.toLowerCase()));d(f)},[g,s]);const n=i.filter(f=>f?.metadata?.tags?.includes("role-roadmap")),v=i.filter(f=>f?.metadata?.tags?.includes("skill-roadmap"));return e.jsx("div",{className:"fixed left-0 right-0 top-0 z-100 h-full items-center justify-center overflow-y-auto overflow-x-hidden overscroll-contain bg-black/50",children:e.jsx("div",{className:"relative mx-auto h-full w-full max-w-2xl p-4 md:h-auto",children:e.jsxs("div",{ref:h,className:"popup-body relative mt-4 overflow-hidden rounded-lg bg-white shadow-sm",children:[e.jsxs("button",{type:"button",className:"popup-close absolute right-2.5 top-3 ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-100 hover:text-gray-900",onClick:t,children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close modal"})]}),e.jsx("input",{ref:m,type:"text",placeholder:"Search roadmaps",className:"block w-full border-b px-5 pb-3.5 pt-4 outline-hidden placeholder:text-gray-400",value:g,onInput:f=>w(f.target.value)}),e.jsxs("div",{className:"min-h-[200px] p-4",children:[e.jsx("span",{className:"block pb-3 text-xs uppercase text-gray-400",children:"Role Based Roadmaps"}),n.length===0&&e.jsx("p",{className:"mb-1 flex h-full items-start text-sm italic text-gray-400"}),n.length>0&&e.jsx("div",{className:"mb-5 flex flex-wrap items-center gap-2",children:n.map(f=>{const p=l.includes(f.id);return e.jsx(ee,{title:f.title,isSelected:p,onClick:()=>{p?o(f.id):a(f.id)}},f.id)})}),e.jsx("span",{className:"block pb-3 text-xs uppercase text-gray-400",children:"Skill Based Roadmaps"}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:v.map(f=>{const p=l.includes(f.id);return e.jsx(ee,{title:f.title,isSelected:p,onClick:()=>{p?o(f.id):a(f.id)}},f.id)})})]}),e.jsxs("div",{className:"border-t border-t-yellow-300 bg-yellow-100 px-4 py-3 text-sm text-yellow-900",children:[e.jsx("h2",{className:"mb-1 text-base font-medium text-yellow-900",children:"More Official Roadmaps Coming Soon"}),e.jsx("p",{children:"We are currently adding more of our official roadmaps to this list. If you don't see the roadmap you are looking for, please check back later."})]})]})})})}function ht(r){const{onClose:t,onClick:s}=r;return e.jsx(Y,{onClose:t,wrapperClassName:"max-w-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Copy Node Details and Resources?"}),e.jsx("p",{className:"balanc text-gray-600",children:"This will just copy the roadmap in your team. Would you like to copy the resource links and node details as well?"}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[e.jsx("button",{className:"rounded-lg border p-2.5 font-normal",onClick:()=>{s(!1)},children:"No, copy roadmap only"}),e.jsx("button",{className:"rounded-lg border bg-black p-2.5 font-normal text-white hover:opacity-80",onClick:()=>{s(!0)},children:"Yes, also copy resources"})]})]})})}function gt(r){const{isLoading:t,teamId:s,learningRoadmapsToShow:a,canManageCurrentTeam:o,onUpdate:l,builtInRoleRoadmaps:h,builtInSkillRoadmaps:m}=r,i=L(),[d,g]=u.useState(!1),[w,n]=u.useState(!1),[v,f]=u.useState(!1),[p,y]=u.useState(),x=u.useMemo(()=>h.concat(m).map(j=>({id:j.id,title:j.title,url:j.url,group:"Roadmaps",renderer:j.renderer||"balsamiq",metadata:j.metadata})),[h,m]);async function b(j,$=!1){if(!s)return;i.loading("Adding roadmap"),D.set("Adding roadmap");const P=x.find(le=>le.id===j),{error:M,response:O}=await K(`https://api.roadmap.sh/v1-update-team-resource-config/${s}`,{teamId:s,resourceId:j,resourceType:"roadmap",removed:[],renderer:P?.renderer||"balsamiq",shouldCopyContent:$});if(M||!O){i.error(M?.message||"Error adding roadmap");return}l(),i.success("Roadmap added"),P?.renderer==="editor"&&n(!1)}async function T(j){if(!s)return;i.loading("Deleting roadmap"),D.set("Deleting roadmap from team");const{error:$,response:P}=await K(`https://api.roadmap.sh/v1-delete-team-resource-config/${s}`,{resourceId:j,resourceType:"roadmap"});if($||!P){i.error($?.message||"Something went wrong");return}i.success("Roadmap removed"),l()}async function C(j){D.set("Removing roadmap"),T(j).finally(()=>{D.set("")})}const I=d&&e.jsx(pt,{onClose:()=>g(!1),showDefaultRoadmapsModal:()=>{n(!0),g(!1)},showCreateCustomRoadmapModal:()=>{f(!0),g(!1)}}),c=x.filter(j=>!a.find($=>$?.defaultRoadmapId===j.id)),N=w&&e.jsx(xt,{onClose:()=>n(!1),teamResourceConfig:a.map(j=>j.resourceId),allRoadmaps:c.filter(j=>j.renderer==="editor"),teamId:s,onRoadmapAdd:j=>{if(!x.find(P=>P.id===j&&P.renderer==="editor")){b(j).finally(()=>{D.set("")});return}n(!1),y(j)},onRoadmapRemove:j=>{confirm("Are you sure you want to remove this roadmap?")&&C(j).finally(()=>{})}}),k=p&&e.jsx(ht,{onClose:()=>{y("")},onClick:j=>{b(p,j).finally(()=>{D.set(""),y("")})}}),S=v&&e.jsx(ae,{teamId:s,onClose:()=>{f(!1)},onCreated:()=>{f(!1)}}),R=e.jsxs("div",{className:"mb-3 flex h-[20px] items-center justify-between gap-2 text-xs",children:[e.jsx("h2",{className:"uppercase text-gray-400",children:"Roadmaps"}),e.jsx("span",{className:"mx-3 h-[1px] grow bg-gray-200"}),o&&e.jsxs("a",{href:`/team/roadmaps?t=${s}`,className:"flex flex-row items-center rounded-full bg-gray-400 px-2.5 py-0.5 text-xs text-white transition-colors hover:bg-black",children:[e.jsx(H,{className:"mr-1.5 size-3",strokeWidth:2.5}),"Roadmaps"]})]});return!t&&a.length===0?e.jsxs(e.Fragment,{children:[R,e.jsxs("div",{className:"flex flex-col items-center rounded-md border bg-white p-4 py-10",children:[I,N,S,k,e.jsx(Se,{className:"mb-4 h-14 w-14 opacity-10"}),e.jsx("h2",{className:"text-lg font-semibold sm:text-lg",children:"No roadmaps"}),e.jsx("p",{className:"my-1 max-w-[400px] text-balance text-sm text-gray-500 sm:my-2 sm:text-base",children:o?"Add a roadmap to start tracking your team":"Ask your team admin to add some roadmaps"}),o&&e.jsx("button",{className:"mt-1 rounded-lg bg-black px-3 py-1 text-sm font-medium text-white hover:bg-gray-900",onClick:()=>g(!0),children:"Add roadmap"})]})]}):e.jsxs(e.Fragment,{children:[I,N,S,k,R,t&&e.jsx(ut,{}),!t&&a.length>0&&e.jsxs("div",{className:"grid grid-cols-1 gap-1.5 sm:grid-cols-3",children:[a.map(j=>{const $=j.learning||0,P=j.done||0,M=j.total||0,O=j.skipped||0;return e.jsx(mt,{isCustomResource:j?.isCustomResource||!1,doneCount:P>M?M:P,learningCount:$>M?M:$,totalCount:M,skippedCount:O,resourceId:j.resourceId,resourceType:"roadmap",updatedAt:j.updatedAt,title:j.resourceTitle,showActions:!1,roadmapSlug:j.roadmapSlug},j.resourceId)}),o&&e.jsx("button",{onClick:()=>g(!0),className:"group relative flex w-full items-center justify-center overflow-hidden rounded-md border border-dashed border-gray-300 bg-white px-3 py-2 text-center text-sm text-gray-500 transition-all hover:border-gray-400 hover:text-black",children:"+ Add Roadmap"})]})]})}function ft(){const[r,t]=u.useState(null);return u.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("t")||null;t(s)},[]),{teamId:r}}function bt(r){const{className:t}=r;return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})}const z=[{name:"Admin",value:"admin",description:"Can do everything"},{name:"Manager",value:"manager",description:"Can manage team and skills"},{name:"Member",value:"member",description:"Can view team and skills"}];function vt(r){const{selectedRole:t,setSelectedRole:s,className:a="w-[120px]"}=r,o=u.useRef(null),[l,h]=u.useState(0),[m,i]=u.useState(!1);return q(o,()=>{i(!1)}),e.jsxs("div",{className:`relative ${a}`,children:[e.jsxs("button",{type:"button",onKeyDown:d=>{if((d.key==="ArrowUp"||d.key==="ArrowDown")&&!m){d.preventDefault(),i(!0);return}if(d.key==="Enter"&&m){d.preventDefault(),s(z[l].value),i(!1);return}d.key==="ArrowDown"&&(d.preventDefault(),h(n=>{const v=n+1;return v>=z.length?0:v})),d.key==="ArrowUp"&&(d.preventDefault(),h(n=>{const v=n-1;return v<0?z.length-1:v}))},onClick:()=>i(!m),className:`flex h-full w-full cursor-default items-center justify-between rounded-md border px-4 ${m?"border-gray-300 bg-gray-100":""}`,children:[e.jsx("span",{className:"capitalize",children:t||"Select Role"}),e.jsx(bt,{className:"relative top-0.5 ml-2 h-4 w-4 text-gray-400"})]}),m&&e.jsx("div",{className:"absolute z-10 mt-1 w-[200px] rounded-md border bg-white shadow-md",ref:o,children:e.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:z.map((d,g)=>e.jsxs("button",{type:"button",className:`w-full cursor-default px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 ${g===l?"bg-gray-100":"bg-white"}`,role:"menuitem",onClick:()=>{i(!1),s(d.value)},children:[e.jsx("span",{className:"block font-medium",children:d.name}),e.jsx("span",{className:"block text-xs text-gray-400",children:d.description})]},d.value))})})]})}function jt(r){const{onClose:t,onInvited:s,teamId:a}=r,o=u.useRef(null),l=u.useRef(null),[h,m]=u.useState("member"),[i,d]=u.useState(""),[g,w]=u.useState(!1),[n,v]=u.useState(""),{teamId:f=a}=ft();u.useEffect(()=>{l?.current?.focus()},[]);const p=async x=>{x.preventDefault(),w(!0),v("");const{response:b,error:T}=await se(`https://api.roadmap.sh/v1-invite-member/${f}`,{email:i,role:h});if(T||!b){w(!1),v(T?.message||"Something went wrong");return}w(!1),y(),s()},y=()=>{w(!1),v(""),t()};return q(o,y),e.jsx("div",{className:"popup fixed left-0 right-0 top-0 z-50 flex h-full items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50",children:e.jsx("div",{className:"relative h-full w-full max-w-md p-4 md:h-auto",children:e.jsxs("div",{ref:o,className:"popup-body relative rounded-lg bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"mb-1.5 text-xl font-medium sm:text-2xl",children:"Invite Member"}),e.jsx("p",{className:"mb-3 hidden text-sm leading-none text-gray-400 sm:block",children:"Enter the email and role below to invite a member."}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"my-4 mt-0 flex flex-col gap-2 sm:mt-4",children:[e.jsx("input",{ref:l,type:"email",name:"invite-member",id:"invite-member",className:"mt-2 block w-full rounded-md border border-gray-300 px-3 py-2 outline-hidden placeholder:text-gray-400 focus:border-gray-400",placeholder:"Enter email address",required:!0,autoFocus:!0,value:i,onInput:x=>d(x.target.value)}),e.jsx("div",{className:"flex h-[42px] w-full flex-col",children:e.jsx(vt,{className:"h-full w-full",selectedRole:h,setSelectedRole:m})}),n&&e.jsx("p",{className:"rounded-md border border-red-300 bg-red-50 p-2 text-sm text-red-700",children:n})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:g,onClick:y,className:"grow cursor-pointer rounded-lg bg-gray-200 py-2 text-center",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!i,className:"grow cursor-pointer rounded-lg bg-black py-2 text-center text-white disabled:opacity-40",children:g?"Please wait ..":"Invite"})]})]})]})})})}function yt(r){const{teamId:t,builtInRoleRoadmaps:s,builtInSkillRoadmaps:a}=r,o=L(),l=G(),[h,m]=u.useState(!0),[i,d]=u.useState([]),[g,w]=u.useState(!1);async function n(){const{response:x,error:b}=await _(`https://api.roadmap.sh/v1-get-team-progress/${t}`);if(b||!x){o.error(b?.message||"Failed to get team progress");return}d(x.sort((T,C)=>T.email===l?.email?-1:C.email===l?.email?1:0))}u.useEffect(()=>{t&&(m(!0),d([]),n().finally(()=>m(!1)))},[t]);const v=i.find(x=>x.email===l?.email),f=v?.progress?.filter(x=>x.resourceType==="roadmap")||[],p=i.sort((x,b)=>x.email===l?.email?-1:b.email===l?.email?1:0),y=["admin","manager"].includes(v?.role);return e.jsxs("section",{className:"mt-8",children:[g&&e.jsx(jt,{onInvited:()=>{o.success("Invite sent"),n().finally(()=>null),w(!1)},onClose:()=>{w(!1)}}),e.jsx(gt,{isLoading:h,teamId:t,learningRoadmapsToShow:f,canManageCurrentTeam:y,onUpdate:n,builtInRoleRoadmaps:s,builtInSkillRoadmaps:a}),e.jsxs("h2",{className:"mb-3 mt-6 flex h-[20px] items-center justify-between text-xs uppercase text-gray-400",children:["Team Members",e.jsx("span",{className:"grow h-[1px] bg-gray-200 mx-3"}),y&&e.jsxs("a",{href:`/team/members?t=${t}`,className:"flex flex-row items-center rounded-full bg-gray-400 px-2.5 py-0.5 text-xs text-white transition-colors hover:bg-black",children:[e.jsx(Re,{className:"mr-1.5 size-3",strokeWidth:2.5}),"Members"]})]}),h&&e.jsx(wt,{className:"mb-6"}),!h&&e.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[p.map(x=>{const b=x?.avatar?`https://dodrc8eu8m09s.cloudfront.net/avatars/${x.avatar}`:"/img/default-avatar.png";return e.jsxs("a",{className:"group relative",href:`/team/member?t=${t}&m=${x._id}`,children:[e.jsx("figure",{className:"relative aspect-square size-8 overflow-hidden rounded-md bg-gray-100",children:e.jsx("img",{src:b,alt:x.name||"",className:"absolute inset-0 h-full w-full object-cover"})}),e.jsx(Z,{position:"top-center",additionalClass:"text-sm",children:x.name})]},x.email)}),y&&e.jsxs("button",{className:"group relative",onClick:()=>w(!0),children:[e.jsx("span",{className:"relative flex aspect-square size-8 items-center justify-center overflow-hidden rounded-md border border-dashed bg-gray-100",children:"+"}),e.jsx(Z,{position:"top-center",additionalClass:"text-sm",children:"Add Member"})]})]}),e.jsx(dt,{teamId:t,canManageCurrentTeam:y})]})}function wt(r){const{className:t}=r;return e.jsx("div",{className:A("flex flex-wrap gap-2",t),children:Array.from({length:15}).map((s,a)=>e.jsx("div",{className:"size-8 animate-pulse rounded-md bg-gray-200"},a))})}function $s(r){const{builtInRoleRoadmaps:t,builtInBestPractices:s,builtInSkillRoadmaps:a,isTeamPage:o=!1,guides:l,videos:h}=r,m=G(),i=L(),d=te(J),{t:g}=Ge(),[w,n]=u.useState(!0),[v,f]=u.useState();async function p(){if(d.length>0)return;const{response:x,error:b}=await _("https://api.roadmap.sh/v1-get-user-teams");if(b||!x){i.error(b?.message||"Something went wrong");return}J.set(x)}u.useEffect(()=>{p().finally(()=>{g&&f(g),n(!1)})},[g]);const y=m?.avatar&&!w?`https://dodrc8eu8m09s.cloudfront.net/avatars/${m.avatar}`:"/img/default-avatar.png";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:A("bg-slate-900",{"striped-loader-slate":w}),children:e.jsx("div",{className:"min-h-[70px] bg-slate-800/30 py-5",children:e.jsx("div",{className:"container flex flex-wrap items-center gap-1.5",children:!w&&e.jsxs(e.Fragment,{children:[e.jsx(W,{label:"Personal",isActive:!v&&!o,href:"/dashboard",avatar:y}),d.map(x=>{const{avatar:b}=x,T=b?`https://dodrc8eu8m09s.cloudfront.net/avatars/${b}`:"/img/default-avatar.png";return e.jsx(W,{label:x.name,isActive:x._id===v,...x.status==="invited"?{href:`/respond-invite?i=${x.memberId}`}:{href:`/teams/${x._id}/activity`},avatar:T},x._id)}),e.jsx(W,{label:"+ Create Team",isActive:!1,href:"/teams/new",className:"border border-dashed border-slate-700 bg-transparent px-3 text-sm text-[13px] text-gray-500 hover:border-solid hover:border-slate-700 hover:text-gray-400"})]})})})}),e.jsxs("div",{className:"",children:[!v&&!o&&e.jsx("div",{className:"bg-slate-900",children:e.jsx(ot,{builtInRoleRoadmaps:t,builtInSkillRoadmaps:a,builtInBestPractices:s,guides:l,videos:h})}),(v||o)&&e.jsx("div",{className:"container",children:e.jsx(yt,{builtInRoleRoadmaps:t,builtInSkillRoadmaps:a,teamId:v})})]})]})}export{$s as DashboardPage};
