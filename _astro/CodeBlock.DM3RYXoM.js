import{j as m}from"./jsx-runtime.D_zvdyIk.js";import{r as y}from"./index.DatCARk7.js";import{c as x}from"./classname.y9b8gBZq.js";import{u as _}from"./use-copy-text.DMdbdIxo.js";import{C as A}from"./check.DCsIB_xO.js";import{C as b}from"./copy.IVh-7Rp7.js";import{c as L}from"./index.zZad4t7S.js";const M=[[/^(<!--)(.+)(-->)$/,!1],[/^(\/\*)(.+)(\*\/)$/,!1],[/^(\/\/|["'#]|;{1,2}|%{1,2}|--)(.*)$/,!0],[/^(\*)(.+)$/,!0]];function O(t,n,e){const o=[];for(const s of t){if(e==="v3"){const l=s.children.flatMap((c,r)=>{if(c.type!=="element")return c;const h=c.children[0];if(h.type!=="text")return c;const f=r===s.children.length-1;if(!j(h.value,f))return c;const d=h.value.split(/(\s+\/\/)/);if(d.length<=1)return c;let g=[d[0]];for(let p=1;p<d.length;p+=2)g.push(d[p]+(d[p+1]||""));return g=g.filter(Boolean),g.length<=1?c:g.map(p=>({...c,children:[{type:"text",value:p}]}))});l.length!==s.children.length&&(s.children=l)}const i=s.children;let a=i.length-1;e==="v1"?a=0:n&&(a=i.length-2);for(let l=Math.max(a,0);l<i.length;l++){const c=i[l];if(c.type!=="element")continue;const r=c.children.at(0);if(r?.type!=="text")continue;const h=l===i.length-1,f=j(r.value,h);if(f)if(n&&!h&&l!==0){const u=C(i[l-1],"{")&&C(i[l+1],"}");o.push({info:f,line:s,token:c,isLineCommentOnly:i.length===3&&c.children.length===1,isJsxStyle:u})}else o.push({info:f,line:s,token:c,isLineCommentOnly:i.length===1&&c.children.length===1,isJsxStyle:!1})}}return o}function C(t,n){if(t.type!=="element")return!1;const e=t.children[0];return e.type!=="text"?!1:e.value.trim()===n}function j(t,n){let e=t.trimStart();const o=t.length-e.length;e=e.trimEnd();const s=t.length-e.length-o;for(const[i,a]of M){if(a&&!n)continue;const l=i.exec(e);if(l)return[" ".repeat(o)+l[1],l[2],l[3]?l[3]+" ".repeat(s):void 0]}}function T(t){const n=t.match(/(?:\/\/|["'#]|;{1,2}|%{1,2}|--)(\s*)$/);return n&&n[1].trim().length===0?t.slice(0,n.index):t}function N(t,n,e,o){return o==null&&(o="v3"),{name:t,code(s){const i=s.children.filter(r=>r.type==="element"),a=[];s.data??={};const l=s.data;l._shiki_notation??=O(i,["jsx","tsx"].includes(this.options.lang),o);const c=l._shiki_notation;for(const r of c){if(r.info[1].length===0)continue;let h=i.indexOf(r.line);r.isLineCommentOnly&&o!=="v1"&&h++;let f=!1;if(r.info[1]=r.info[1].replace(n,(...d)=>e.call(this,d,r.line,r.token,i,h)?(f=!0,""):d[0]),!f)continue;o==="v1"&&(r.info[1]=T(r.info[1]));const u=r.info[1].trim().length===0;if(u&&(r.info[1]=""),u&&r.isLineCommentOnly)a.push(r.line);else if(u&&r.isJsxStyle)r.line.children.splice(r.line.children.indexOf(r.token)-1,3);else if(u)r.line.children.splice(r.line.children.indexOf(r.token),1);else{const d=r.token.children[0];d.type==="text"&&(d.value=r.info.join(""))}}for(const r of a){const h=s.children.indexOf(r),f=s.children[h+1];let u=1;f?.type==="text"&&f?.value===`
`&&(u=2),s.children.splice(h,u)}}}}function E(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(t={},n="@shikijs/transformers:notation-map"){const{classMap:e={},classActivePre:o=void 0}=t;return N(n,new RegExp(`\\s*\\[!code (${Object.keys(e).map(E).join("|")})(:\\d+)?\\]`),function([s,i,a=":1"],l,c,r,h){const f=Number.parseInt(a.slice(1),10);for(let u=h;u<Math.min(h+f,r.length);u++)this.addClassToHast(r[u],e[i]);return o&&this.addClassToHast(this.pre,o),!0},t.matchAlgorithm)}function w(t={}){const{classLineAdd:n="diff add",classLineRemove:e="diff remove",classActivePre:o="has-diff"}=t;return v({classMap:{"++":n,"--":e},classActivePre:o,matchAlgorithm:t.matchAlgorithm},"@shikijs/transformers:notation-diff")}function $(t={}){const{classMap:n={error:["highlighted","error"],warning:["highlighted","warning"]},classActivePre:e="has-highlighted"}=t;return v({classMap:n,classActivePre:e,matchAlgorithm:t.matchAlgorithm},"@shikijs/transformers:notation-error-level")}function H(t={}){const{classActiveLine:n="focused",classActivePre:e="has-focused"}=t;return v({classMap:{focus:n},classActivePre:e,matchAlgorithm:t.matchAlgorithm},"@shikijs/transformers:notation-focus")}function S(t={}){const{classActiveLine:n="highlighted",classActivePre:e="has-highlighted"}=t;return v({classMap:{highlight:n,hl:n},classActivePre:e,matchAlgorithm:t.matchAlgorithm},"@shikijs/transformers:notation-highlight")}function B(t,n,e,o){const s=k(t);let i=s.indexOf(e);for(;i!==-1;)I.call(this,t.children,n,i,e.length,o),i=s.indexOf(e,i+1)}function k(t){return t.type==="text"?t.value:t.type==="element"&&t.tagName==="span"?t.children.map(k).join(""):""}function I(t,n,e,o,s){let i=0;for(let a=0;a<t.length;a++){const l=t[a];if(l.type!=="element"||l.tagName!=="span"||l===n)continue;const c=l.children[0];if(c.type==="text"){if(P([i,i+c.value.length-1],[e,e+o])){const r=Math.max(0,e-i),h=o-Math.max(0,i-e);if(h===0)continue;const f=R(l,c,r,h);this.addClassToHast(f[1],s);const u=f.filter(Boolean);t.splice(a,1,...u),a+=u.length-1}i+=c.value.length}}}function P(t,n){return t[0]<=n[1]&&t[1]>=n[0]}function R(t,n,e,o){const s=n.value,i=a=>z(t,{children:[{type:"text",value:a}]});return[e>0?i(s.slice(0,e)):void 0,i(s.slice(e,e+o)),e+o<s.length?i(s.slice(e+o)):void 0]}function z(t,n){return{...t,properties:{...t.properties},...n}}function F(t={}){const{classActiveWord:n="highlighted-word",classActivePre:e=void 0}=t;return N("@shikijs/transformers:notation-highlight-word",/\s*\[!code word:((?:\\.|[^:\]])+)(:\d+)?\]/,function([o,s,i],a,l,c,r){const h=i?Number.parseInt(i.slice(1),10):c.length;s=s.replace(/\\(.)/g,"$1");for(let f=r;f<Math.min(r+h,c.length);f++)B.call(this,c[f],l,s,n);return e&&this.addClassToHast(this.pre,e),!0},t.matchAlgorithm)}const J=x("mt-0 text-sm","[&_pre]:py-0","[&_pre]:grid","[&_code]:py-4","[&_code]:w-full","[&_code]:grid","[&_code]:overflow-x-auto","[&_code]:no-scrollbar","[&_code]:bg-transparent","[&_.line]:px-3","[&_.line]:w-full","[&_.line]:relative","[&_.line]:min-h-5");function W(t,n){return L(t,{lang:n??"typescript",theme:"github-light",transformers:[w({matchAlgorithm:"v3"}),S({matchAlgorithm:"v3"}),F({matchAlgorithm:"v3"}),H({matchAlgorithm:"v3"}),$({matchAlgorithm:"v3"})]})}const D=({children:t,...n})=>m.jsx("div",{...n,children:m.jsx("pre",{className:"w-full bg-white",children:m.jsx("code",{children:t?.toString().split(`
`).map((e,o)=>m.jsx("span",{className:"line",children:e},o))})})}),Y=({children:t,lineNumbers:n=!0,className:e,value:o,...s})=>m.jsx("div",{className:x(J,e),...s,children:t}),Z=({children:t,language:n,syntaxHighlighting:e=!0,...o})=>{const[s,i]=y.useState(null);return y.useLayoutEffect(()=>{e&&typeof t=="string"&&W(t,n).then(i).catch(console.error)},[t,e,n]),e&&s?m.jsx("div",{dangerouslySetInnerHTML:{__html:s},...o}):m.jsx(D,{children:t})};function tt(t){const{language:n,code:e,className:o,...s}=t,{copyText:i,isCopied:a}=_();return m.jsxs("div",{className:x("flex items-center justify-between gap-2 border-b border-gray-200 bg-gray-50 px-3 py-2",o),...s,children:[m.jsx("span",{className:"text-sm text-gray-600",children:n}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{onClick:()=>i(e),className:"flex size-6 items-center justify-center gap-2 rounded-md text-gray-400 hover:bg-zinc-200 hover:text-black focus:outline-none",children:a?m.jsx(A,{className:"size-3.5"}):m.jsx(b,{className:"size-3.5"})})})]})}export{tt as C,Y as a,Z as b};
