import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.DatCARk7.js";import{b as u,a as f}from"./http.qJhOBTpO.js";import{p as a}from"./page.DyYQD7MX.js";import{i as j}from"./jwt.1xGNZsvU.js";import{s as w}from"./popup.CdCAhVM2.js";import{g as v}from"./browser.3c2kCsRM.js";import{E as b}from"./ErrorIcon2.CKS6u1cj.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.D_pnqQn4.js";import"./index.3whys8t3.js";function y(t){const{className:c}=t;return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:c,children:[e.jsx("path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"}),e.jsx("path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"}),e.jsx("path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"}),e.jsx("path",{d:"M10 6h4"}),e.jsx("path",{d:"M10 10h4"}),e.jsx("path",{d:"M10 14h4"}),e.jsx("path",{d:"M10 18h4"})]})}function B(){const{i:t}=v(),[c,d]=i.useState(!0),[l,n]=i.useState(""),[m,x]=i.useState(),p=j();async function g(o){const{response:r,error:s}=await u(`https://api.roadmap.sh/v1-get-invitation/${o}`);if(s||!r){n(s?.message||"Something went wrong");return}x(r)}i.useEffect(()=>{t?g(t).finally(()=>{a.set(""),d(!1)}):(d(!1),n("Missing invite ID in URL"),a.set(""))},[t]);async function h(o){a.set("Please wait..."),n("");const{response:r,error:s}=await f(`https://api.roadmap.sh/v1-respond-invite/${t}`,{status:o});if(s||!r){n(s?.message||"Something went wrong");return}if(o==="reject"){window.location.href="/";return}window.location.href=`/teams/${r.teamId}/activity`}return c?null:m?e.jsxs("div",{className:"container text-center",children:[e.jsx(y,{className:"mx-auto mt-24 mb-4 h-20 w-20 opacity-20"}),e.jsx("h2",{className:"mb-1 text-2xl font-bold",children:"Join Team"}),e.jsxs("p",{className:"mb-3 text-base leading-6 text-gray-600",children:["You have been invited to join the team"," ",e.jsx("strong",{id:"team-name",children:m?.team?.name}),"."]}),!p&&e.jsx("div",{className:"mx-auto w-full duration-500 sm:max-w-md",children:e.jsx("div",{className:"flex w-full items-center gap-2",children:e.jsx("button",{onClick:()=>w(),"data-popup":"login-popup",type:"button",className:"grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Login to respond"})})}),p&&e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>h("accept").finally(()=>{a.set("")}),className:"grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center hover:bg-gray-300",children:"Accept"}),e.jsx("button",{type:"button",onClick:()=>h("reject").finally(()=>{a.set("")}),className:"grow cursor-pointer rounded-lg bg-red-500 px-3 py-2 text-white hover:bg-red-600 disabled:opacity-40",children:"Reject"})]}),l&&e.jsx("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:l})]})]}):e.jsxs("div",{className:"container text-center",children:[e.jsx(b,{className:"mx-auto mt-24 mb-4 w-20 opacity-20"}),e.jsx("h2",{className:"mb-1 text-2xl font-bold",children:"Error"}),e.jsx("p",{className:"mb-4 text-base leading-6 text-gray-600",children:l||"There was a problem, please try again."}),e.jsx("div",{children:e.jsx("a",{href:"/",className:"grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Back to home"})})]})}export{B as RespondInviteForm};
