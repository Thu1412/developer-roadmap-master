import{j as e}from"./jsx-runtime.D_zvdyIk.js";/* empty css                                 */import{u as N}from"./useQuery.BDS8a8wn.js";import{r as g}from"./index.DatCARk7.js";import{r as ue}from"./index.Cfv66hal.js";import{u as xe}from"./use-keydown.UQ-VttR1.js";import{c as k}from"./classname.y9b8gBZq.js";import{l as K}from"./dom.B_TnKQIa.js";import{i as F}from"./jwt.1xGNZsvU.js";import{s as V}from"./popup.CdCAhVM2.js";import{s as ge}from"./slugger.rj1cS6co.js";import{a as he}from"./ai-course.C9pe4RQ2.js";import{b as fe}from"./billing.CdvAGjKR.js";import{S as Y,c as ye,U as je,R as be,C as we}from"./UpdatePersonaModal.DHq1e2hk.js";import{l as ve,r as Ne}from"./roadmap.C9m-s_nC.js";import{q as ke,a as b}from"./query-client.BXTfwa3d.js";import{h as Ce,a as Ie}from"./query-http.YhxTqNi8.js";import{U as Se}from"./UpgradeAccountModal.Bf1PhEwX.js";import{r as G,M as Te,u as Le,a as Re,b as Pe,C as J}from"./TopicDetail.0rOhIF79.js";import{n as S,c as Ue}from"./ai.CwFQCDSa.js";import{g as Me}from"./number.al1uMBuK.js";import{d as H,a as X,u as ze}from"./resource-progress.CNHeJjXc.js";import{u as Z}from"./useMutation.BrRqCquH.js";import{C as z}from"./CheckIcon.D4OhQ5l1.js";import{u as ee}from"./use-toast.BdCcSTJE.js";import{L}from"./loader-circle.1OH4z0ap.js";import{C as se}from"./chevron-right.CrKPBoyZ.js";import{u as $e}from"./use-copy-text.DMdbdIxo.js";import{u as Ee}from"./use-auth.Bw1nhFr_.js";import{S as Oe}from"./share.Ho6hSRxU.js";import{U as Ae}from"./user-round.BP1hNqEM.js";import{B as _e}from"./bot.BOh-sxCh.js";import{B as Be}from"./book-open.D6AjheEV.js";import{P as De}from"./plus.CQTVuaoH.js";import{X as Fe}from"./x.ZVxf9pxD.js";import{C as qe}from"./chevron-down.C3HM4CLF.js";import{P as He}from"./person-standing.JwgQFf2-.js";import{T as Qe}from"./trash-2.B2o931ei.js";import{S as We}from"./send.CNwPxIps.js";import{W as te}from"./wand-sparkles.DH_Id-ff.js";import{c as Ke}from"./createLucideIcon.uNyFMN5K.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Je=Ke("message-circle-plus",Ve);function Ye(o){return ke({queryKey:["roadmap-questions",o],queryFn:()=>Ce(`/v1-official-roadmap-questions/${o}`),refetchOnMount:!1})}function Ge(o){let s=o.length;const t=[...o];for(;s!=0;){let a=Math.floor(Math.random()*s);s--,[t[s],t[a]]=[t[a],t[s]]}return t}function Xe(o,s){const t=[],a=Object.keys(s);if(a.length>0){const c=a.join("|");o=o.replace(new RegExp(`\`\`\`\\w*?\\n+?<(${c})>`,"g"),"<$1>"),o=o.replace(new RegExp(`<\\/(${c})>\\n+?\`\`\``,"g"),"</$1>")}if(a.length===0)return t.push({id:S(),type:"text",text:o}),t;const n=a.join("|"),i=new RegExp(`<(${n})>(.*?)</\\1>`,"gs");let r=0,l;for(;(l=i.exec(o))!==null;){const[c,m,p]=l;if(l.index>r){const j=o.slice(r,l.index);t.push({id:S(),type:"text",text:j})}const d=s[m]({content:p});t.push({id:S(),type:m,data:d}),r=i.lastIndex}for(const c of a){const m=`<${c}>`,p=o.indexOf(m,r),d=`</${c}>`,j=o.indexOf(d,r);if(p!==-1&&j===-1){if(p>r){const u=o.slice(r,p);t.push({id:S(),type:"text",text:u})}const f=o.slice(p+m.length),y=s[c]({content:f});return t.push({id:S(),type:c,data:y}),t}}if(r<o.length){const c=o.slice(r);t.push({id:S(),type:"text",text:c})}return t}function Ze(o){const{roadmapId:s}=o,{data:t}=N(H("roadmap",s),b),a=t?.done?.length??0,n=t?.skipped?.length??0,i=t?.totalTopicCount??0,r=a+n,l=Me(r,i);return e.jsxs("div",{className:"relative my-6 flex flex-col gap-3 rounded-xl border border-gray-200 bg-white p-4 first:mt-0 last:mb-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Progress"}),e.jsxs("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700",children:[l,"%"]})]}),e.jsxs("span",{className:"hidden text-sm font-medium text-gray-600 md:block",children:[r," / ",i," topics"]})]}),e.jsx("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-gray-100",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-green-600 transition-all duration-300",style:{width:`${l}%`}})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("span",{children:["Completed: ",a]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsxs("span",{children:["Skipped: ",n]})]})]})]})}function es(o){const s=[],t=/<update-progress-item>.*?<\/update-progress-item>/gs,a=o.match(t);if(!a)return s;for(const n of a){const i=/<topic-id>(.*?)<\/topic-id>/,r=n.match(i)?.[1]?.trim(),l=/<topic-action>(.*?)<\/topic-action>/,c=n.match(l)?.[1].trim()?.toLowerCase();!r||!c||s.push({id:r,action:c})}return s}function ss(o){const{roadmapId:s,updateUserProgress:t,isLoading:a=!1}=o,n=ee(),{data:i}=N(G(s),b),{mutate:r,isPending:l,isSuccess:c}=Z({mutationFn:u=>Ie(`/v1-bulk-update-resource-progress/${s}`,u),onSuccess:()=>(t.forEach(u=>{X(u.id,u.action)}),b.invalidateQueries(H("roadmap",s))),onError:u=>{n.error(u?.message??"Something went wrong, please try again.")}},b),m=g.useMemo(()=>t.map(u=>{const C=i?.find(R=>R.nodeId===u.id);return{...u,text:(C?.text||u.id)?.split(" > ").slice(1).join(" > ")}}),[t,i]),[p,d]=g.useState(!1),j=4,f=p?m:m.slice(0,j),y=m.length>j;return e.jsx("div",{className:"relative my-6 w-full first:mt-0 last:mb-0",children:e.jsxs("div",{className:"relative flex flex-col gap-0.5",children:[f.map(u=>e.jsx(ts,{roadmapId:s,topicId:u.id,text:u.text,action:u.action,isStreaming:a,isBulkUpdating:l,isBulkUpdateSuccess:c},u.id)),y&&e.jsxs("div",{className:"relative mt-1 flex items-center justify-between gap-2",children:[e.jsxs("button",{className:"z-50 flex items-center gap-1 rounded-md bg-gray-400 px-2 py-1 text-xs font-medium text-white hover:opacity-80 disabled:cursor-not-allowed disabled:opacity-70",onClick:()=>d(!p),disabled:a,children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"size-3 animate-spin"}),m.length," loaded .."]}),!a&&e.jsx(e.Fragment,{children:p?"- Show Less":`+ Show ${m.length-j} More`})]}),e.jsxs("button",{className:"z-50 flex items-center gap-1 rounded-md bg-green-600 px-2 py-1 text-xs font-medium text-white hover:bg-green-700 disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-70",disabled:l||a||c,onClick:()=>{const u=t.filter(h=>h.action==="done").map(h=>h.id),C=t.filter(h=>h.action==="learning").map(h=>h.id),R=t.filter(h=>h.action==="skipped").map(h=>h.id),I=t.filter(h=>h.action==="pending").map(h=>h.id);r({done:u,learning:C,skipped:R,pending:I})},children:[l&&e.jsx(L,{className:"size-3 animate-spin"}),!l&&e.jsx(z,{additionalClasses:"size-3"}),"Apply All"]})]})]})})}function ts(o){const{roadmapId:s,topicId:t,text:a,action:n,isStreaming:i,isBulkUpdating:r,isBulkUpdateSuccess:l}=o,c=ee(),{mutate:m,isSuccess:p,isPending:d}=Z({mutationFn:y=>ze({resourceId:s,resourceType:"roadmap",topicId:t},y),onMutate:()=>{},onSuccess:()=>{X(t,n)},onError:()=>{c.error("Something went wrong, please try again.")},onSettled:()=>b.invalidateQueries(H("roadmap",s))},b),j=a.split(" > "),f=j.length-1;return e.jsxs("div",{className:"flex min-h-[40px] items-center justify-between gap-2 rounded-lg border border-gray-200 bg-white py-1 pr-1 pl-3",children:[e.jsx("span",{className:"flex items-center gap-1 truncate text-sm text-gray-500",children:j.map((y,u)=>e.jsxs(g.Fragment,{children:[y,u!==f&&e.jsxs("span",{className:"text-gray-500",children:[e.jsx(se,{className:"size-3 shrink-0"})," "]})]},u))}),!p&&!l&&e.jsxs(e.Fragment,{children:[!i&&e.jsxs("button",{className:k("flex shrink-0 items-center gap-1.5 rounded-md border border-gray-200 px-2 py-1 text-xs disabled:pointer-events-none disabled:opacity-40",{"bg-green-100 hover:border-green-300 hover:bg-green-200":n==="done","bg-yellow-100 hover:border-yellow-300 hover:bg-yellow-200":n==="learning","bg-gray-800 text-white hover:border-black hover:bg-black":n==="skipped","bg-gray-100 hover:border-gray-300 hover:bg-gray-200":n==="pending"}),onClick:()=>m(n),disabled:i||d||r,children:[(d||r)&&e.jsx(L,{className:"size-4 animate-spin"}),!d&&!r&&e.jsxs(e.Fragment,{children:[e.jsx(z,{additionalClasses:"size-3"}),"Mark it as ",n]})]}),i&&e.jsx("span",{className:"flex size-[30px] items-center justify-center text-gray-300",children:e.jsx(L,{className:"size-4 animate-spin"})})]}),(p||l)&&e.jsx("span",{className:"flex size-[30px] items-center justify-center text-green-500",children:e.jsx(z,{additionalClasses:"size-4"})})]})}function as(o){const s=[],t=/<topic-id>.*?<\/topic-id>/gs,a=o.match(t);if(!a)return s;for(const n of a){const i=/<topic-id>(.*?)<\/topic-id>/,r=n.match(i)?.[1]?.trim();r&&s.push({topicId:r})}return s}function rs(o){const{roadmapId:s,topics:t,onTopicClick:a}=o,{data:n}=N(G(s),b),i=g.useMemo(()=>t.map(r=>{const l=n?.find(c=>c.nodeId===r.topicId);return{...r,text:(l?.text||r.topicId)?.split(" > ").slice(1).join(" > ")}}),[t,n]);return e.jsx("div",{className:"relative my-6 flex flex-wrap gap-1 first:mt-0 last:mb-0",children:i.map(r=>{const l=r.text.split(" > ").slice(-2),c=l.length,m=r.text.split(" > ").pop();if(m)return e.jsx("button",{className:"collapse-if-empty flex items-center gap-1 rounded-lg border border-gray-200 bg-white p-1 px-2 text-left text-sm hover:bg-gray-50",onClick:()=>{m&&a?.(r.topicId,m)},children:l.map((p,d)=>e.jsxs(g.Fragment,{children:[e.jsx("span",{children:p}),d<c-1&&e.jsx(se,{className:"size-3 text-gray-400",strokeWidth:2.5})]},d))},r.topicId)})})}function os(o){const{roadmapId:s}=o,t=Ee(),{copyText:a,isCopied:n}=$e(),i=()=>{const r=`undefined/${s}?s=${t?.id}`;a(r)};return e.jsx("div",{className:"relative my-6 flex flex-wrap gap-1 first:mt-0 last:mb-0",children:e.jsxs("button",{className:k("flex items-center gap-1.5 rounded-lg border border-gray-200 bg-white p-1 px-1.5 text-left text-sm",n&&"text-green-500"),onClick:i,children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-4 w-4"}),"Share Progress"]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(z,{additionalClasses:"size-4"}),"Copied"]})]})})}function ns(o){const s=[],t=/<roadmap-slug>.*?<\/roadmap-slug>/gs,a=o.match(t);if(!a)return s;for(const n of a){const i=/<roadmap-slug>(.*?)<\/roadmap-slug>/,r=n.match(i)?.[1]?.trim();r&&s.push({roadmapSlug:r})}return s}function is(o){const{roadmapSlugs:s}=o,{data:t,isLoading:a}=N(ve(),b),n=g.useMemo(()=>s.map(i=>{const r=t?.find(l=>l.id===i.roadmapSlug);return{...i,title:r?.title}}),[s,t]);return e.jsx("div",{className:"relative my-6 flex flex-wrap gap-1 first:mt-0 last:mb-0",children:n.map(i=>e.jsxs("a",{href:`/${i.roadmapSlug}/ai`,target:"_blank",className:"group flex h-[34px] items-center gap-2 rounded-lg border border-gray-200 bg-white px-2.5 py-1.5 text-left text-sm text-gray-700 transition-all hover:border-gray-400 hover:text-black active:bg-gray-100",children:[i.title,a&&e.jsx(L,{className:"size-3.5 animate-spin text-gray-400 group-hover:text-gray-600"}),!a&&e.jsx(Y,{className:"ml-1 size-3.5 text-gray-400 transition-transform group-hover:text-gray-600"})]},i.roadmapSlug))})}function q(o){const{roadmapId:s,message:t,isStreaming:a,children:n,onTopicClick:i}=o,{role:r}=t;return e.jsx("div",{className:k("flex flex-col rounded-lg",r==="user"?"bg-gray-300/30":"bg-yellow-500/30"),children:e.jsxs("div",{className:"flex items-start gap-2.5 p-3",children:[e.jsx("div",{className:k("flex size-6 shrink-0 items-center justify-center rounded-full",r==="user"?"bg-gray-200 text-black":"bg-yellow-400 text-black"),children:r==="user"?e.jsx(Ae,{className:"size-4 stroke-[2.5]"}):e.jsx(_e,{className:"size-4 stroke-[2.5]"})}),n||e.jsx("div",{children:t.parts.map(l=>{const{type:c}=l;if(r==="user"&&c==="text")return e.jsx("div",{className:"prose prose-sm message-markdown max-w-full text-sm",dangerouslySetInnerHTML:{__html:l.text??""}},`message-${t.id}-part-${c}`);if(c==="text"){const m=l.text;return Xe(m,{"user-progress":()=>({}),"update-progress":d=>es(d.content),"roadmap-topics":d=>as(d.content),"resource-progress-link":()=>({}),"roadmap-recommendations":d=>ns(d.content)}).map((d,j)=>{const{type:f}=d,y=`message-${t.id}-part-${f}-${j}`;return f==="text"?e.jsx(Te,{className:"prose prose-sm message-markdown max-w-full text-sm",children:d.text??""},y):f==="user-progress"?e.jsx(Ze,{roadmapId:s},y):f==="update-progress"?e.jsx(ss,{roadmapId:s,updateUserProgress:d.data,isLoading:a},y):f==="roadmap-topics"?e.jsx(rs,{roadmapId:s,topics:d.data,onTopicClick:i},y):f==="resource-progress-link"?e.jsx(os,{roadmapId:s},y):f==="roadmap-recommendations"?e.jsx(is,{roadmapSlugs:d.data},y):null})}})})]})})}function ls(o){const{messages:s,status:t,roadmapId:a,defaultQuestions:n,onTopicClick:i,onDefaultQuestionClick:r}=o,l=t==="streaming",c=Le(s,t);return e.jsx("div",{className:"absolute inset-0 flex flex-col",children:e.jsx("div",{className:"relative flex grow flex-col justify-end",children:e.jsxs("div",{className:"flex flex-col justify-end gap-2 px-3 py-2",children:[e.jsx(q,{roadmapId:a,message:{id:"__welcome_message__",role:"assistant",parts:[{type:"text",text:"Hello, how can I help you today?"}]},isStreaming:l}),s.length===0&&n&&n.length>0&&e.jsxs("div",{className:"mt-0.5 mb-1",children:[e.jsx("p",{className:"mb-2 text-xs font-normal text-gray-500",children:"Some questions you might have about this roadmap:"}),e.jsx("div",{className:"flex flex-col justify-end gap-1",children:n.map((m,p)=>e.jsx("button",{className:"flex h-full self-start rounded-md bg-yellow-500/10 px-3 py-2 text-left text-sm text-black hover:bg-yellow-500/20",onClick:()=>r?.(m),children:m},`default-question-${p}`))})]}),s.map((m,p)=>{const d=p===s.length-1;return c&&d&&m.role==="assistant"?null:e.jsx(q,{roadmapId:a,message:m,isStreaming:l,onTopicClick:i},m.id)}),c&&e.jsx(q,{roadmapId:a,message:{id:"__thinking_message__",role:"assistant",parts:[{type:"text",text:"Thinking..."}]},isStreaming:l})]})})})}const cs=g.memo(ls);function T(o){const{onClick:s,href:t,icon:a,children:n,className:i,target:r}=o,l=k("flex shrink-0 items-center gap-1.5 text-xs text-gray-600 transition-colors hover:text-gray-900 min-w-8",i);return!s&&!t?e.jsxs("span",{className:l,children:[a,n&&e.jsx("span",{className:"hidden sm:block",children:n})]}):t?e.jsxs("a",{href:t,target:r,rel:"noopener noreferrer",className:l,children:[a,n&&e.jsx("span",{className:"hidden sm:block",children:n})]}):e.jsxs("button",{onClick:s,className:l,children:[a,n&&e.jsx("span",{className:"hidden sm:block",children:n})]})}function ds(o){const{onUpgradeClick:s}=o;return e.jsx("div",{className:"border-t border-gray-200 bg-black px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx(te,{className:"h-4 w-4 flex-shrink-0 text-white"}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"mb-1 font-medium text-white",children:"You've reached your AI usage limit"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Upgrade to Pro for relaxed limits and advanced features"})]}),e.jsx("button",{className:"flex-shrink-0 rounded-md bg-white px-3 py-1.5 text-xs font-medium text-black transition-colors hover:bg-gray-100",onClick:s,children:"Upgrade to Pro"})]})})}function ms(o){const{percentageUsed:s,onUpgradeClick:t}=o;return e.jsxs("button",{onClick:t,className:"flex items-center gap-2 rounded-md px-3 py-1.5 text-xs font-medium transition-all hover:bg-yellow-200",children:[e.jsxs("div",{className:"hidden items-center gap-1.5 sm:flex",children:[e.jsx("div",{className:"h-1.5 w-6 overflow-hidden rounded-full bg-gray-200",children:e.jsx("div",{className:k("h-full transition-all duration-300",s>=90?"bg-red-500":s>=70?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(s,100)}%`}})}),e.jsxs("span",{className:"text-yellow-700",children:[s,"% used"]})]}),e.jsx("span",{className:"font-semibold text-yellow-800 underline underline-offset-2",children:"Upgrade"})]})}function et(o){const{roadmapId:s}=o,[t,a]=g.useState(!1),[n,i]=g.useState(""),r=g.useRef(null),[l,c]=g.useState(!1),[m,p]=g.useState(!1),{data:d}=N(Ye(s),b),j=g.useMemo(()=>!d?.questions||d.questions.length===0?[]:Ge([...d.questions]).slice(0,4),[d]),{data:f,isLoading:y}=N(Ne(s),b),u=F(),{data:C,isLoading:R}=N(he(),b),I=u&&(C?.used||0)>=(C?.limit||0),h=Math.round((C?.used||0)/(C?.limit||0)*100),{data:ae,isLoading:ps}=N(fe(),b),$=ae?.status==="active";g.useMemo(()=>{const x=["topic","subtopic","todo"];return f?.json?.nodes.filter(v=>x.includes(v.type||"")).length??0},[f]);const re=(x,v)=>{const D=ge(v)+"@"+x;window.dispatchEvent(new CustomEvent("roadmap.node.click",{detail:{resourceType:"roadmap",resourceId:s,topicId:D,isCustomResource:!1}})),ue.flushSync(()=>{a(!0)})},[oe,E]=g.useState(!0),[w,P]=g.useState(),{data:U}=N(ye(w),b),{messages:O,sendMessage:ne,status:A,stop:ie,setMessages:_}=Re({transport:Ue,onData:x=>{if(x.type==="data-redirect"){const{title:v,chatId:D}=x.data;document.title=v,P(D)}}}),{scrollToBottom:M,scrollableContainerRef:le,showScrollToBottomButton:ce}=Pe({messages:O});g.useEffect(()=>{U&&(_(U?.messages??[]),E(!1),setTimeout(()=>{M("instant")},0))},[U]),g.useEffect(()=>{w||(_([]),E(!1))},[w]),g.useEffect(()=>{K(t)},[t]),xe("Escape",()=>{a(!1)}),g.useEffect(()=>{const x=()=>{K(t)};return window.addEventListener(J,x),()=>{window.removeEventListener(J,x)}},[t,l]);function de(x){return{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:x}]}]}}const me=()=>{_([]),i("")},B=x=>{if(!F()){a(!1),V();return}const v=(x??n).trim();v&&(ne({text:v,metadata:{json:de(v)}},{body:{roadmapId:s,...w?{chatHistoryId:w}:{}}}),setTimeout(()=>{M("smooth"),i(""),r.current?.focus()},0))},Q=A!=="ready",W=O.length>0,pe=`/ai/roadmap-chat/${s}${w?`?chatId=${w}`:""}`;return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{onClick:()=>{a(!1)},className:"fixed inset-0 z-50 bg-black opacity-50"}),m&&e.jsx(Se,{onClose:()=>{p(!1)}}),l&&e.jsx(je,{roadmapId:s,onClose:()=>{c(!1)}}),e.jsxs("div",{className:k("animate-fade-slide-up ai-chat fixed bottom-5 left-1/2 max-h-[95vh] max-w-[968px] -translate-x-1/4 transform flex-col gap-1.5 overflow-hidden px-4 duration-300 sm:max-h-[50vh] lg:flex",t?"z-91 h-full w-full":"z-40 w-auto"),children:[t&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flex h-full w-full flex-col overflow-hidden rounded-lg bg-white shadow-lg",children:[oe&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white",children:e.jsxs("div",{className:"flex items-center rounded-md border border-gray-200 py-2 pr-3 pl-2",children:[e.jsx(L,{className:"size-4 animate-spin stroke-[2.5] text-gray-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading history.."})]})}),e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsx("div",{className:"flex",children:e.jsx(T,{icon:e.jsx(Be,{className:"h-3.5 w-3.5"}),className:"pointer-events-none text-sm",children:U?.title||"AI Tutor"})}),e.jsxs("div",{className:"flex gap-1.5",children:[$&&w&&e.jsx(T,{onClick:()=>{P(void 0),r.current?.focus()},icon:e.jsx(De,{className:"h-3.5 w-3.5"}),className:"justify-center rounded-md bg-gray-200 px-2 py-1 text-xs text-black hover:bg-gray-300"}),e.jsx(be,{roadmapId:s,activeChatHistoryId:w,onChatHistoryClick:x=>{E(!0),P(x)},onDelete:x=>{w===x&&P(void 0)},onUpgrade:()=>{p(!0)}}),e.jsx(T,{href:pe,target:"_blank",icon:e.jsx(Y,{className:"h-3.5 w-3.5"}),className:"hidden justify-center rounded-md bg-gray-200 px-1 py-1 text-gray-500 hover:bg-gray-300 sm:flex"}),e.jsx(T,{onClick:()=>a(!1),icon:e.jsx(Fe,{className:"h-3.5 w-3.5"}),className:"flex items-center justify-center rounded-md bg-red-100 px-1 py-1 text-red-500 hover:bg-red-200"})]})]}),e.jsxs("div",{className:"relative flex grow flex-col",children:[e.jsx("div",{className:"relative grow overflow-y-auto",ref:le,children:e.jsx(cs,{messages:O,status:A,roadmapId:s,defaultQuestions:j,onTopicClick:re,onDefaultQuestionClick:B})}),ce&&e.jsxs("button",{onClick:()=>{M("instant")},className:"absolute inset-x-0 bottom-2 mx-auto mt-2 flex w-fit items-center gap-1.5 rounded-full bg-gray-900 px-3 py-1.5 text-xs text-white shadow-lg transition-all hover:bg-gray-800",children:[e.jsx(qe,{className:"h-3 w-3"}),"Scroll to bottom"]})]}),I&&e.jsx(ds,{onUpgradeClick:()=>{p(!0),a(!1)}}),!I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-between border-t border-gray-200 px-3 pt-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{onClick:()=>{if(!F()){a(!1),V();return}c(!0)},icon:e.jsx(He,{className:"h-3.5 w-3.5"}),className:"rounded-md bg-gray-200 py-1 pr-2 pl-1.5 text-gray-500 hover:bg-gray-300",children:"Personalize"}),!$&&u&&e.jsx(ms,{percentageUsed:h,onUpgradeClick:()=>{p(!0),a(!1)}})]}),W&&!$&&e.jsx(T,{onClick:()=>{i(""),me()},icon:e.jsx(Qe,{className:"h-3.5 w-3.5"}),className:"rounded-md bg-gray-200 py-1 pr-2 pl-1.5 text-gray-500 hover:bg-gray-300",children:"Clear"})]}),e.jsxs("div",{className:"relative flex items-center text-sm",children:[e.jsx("input",{ref:r,type:"text",value:n,onChange:x=>i(x.target.value),autoFocus:!0,disabled:I,onKeyDown:x=>{if(x.key==="Enter"){if(x.preventDefault(),A!=="ready")return;B()}},placeholder:I?"You have reached the usage limit for today..":"Ask me anything about this roadmap...",className:k("w-full resize-none px-3 py-4 outline-none",I&&"bg-gray-100 text-gray-400")}),e.jsx("button",{className:"absolute top-1/2 right-2 -translate-y-1/2 p-1 text-zinc-500 hover:text-black disabled:opacity-50",disabled:y||I,onClick:()=>{if(Q){ie();return}B()},children:Q?e.jsx(we,{className:"h-4 w-4"}):e.jsx(We,{className:"h-4 w-4"})})]})]})]})}),!t&&e.jsx("button",{className:k("relative mx-auto flex w-max flex-shrink-0 cursor-pointer items-center justify-center gap-2 rounded-full bg-stone-900 py-2.5 pr-8 pl-6 text-center text-white shadow-2xl transition-all duration-300 hover:scale-101 hover:bg-stone-800"),onClick:()=>{a(!0),setTimeout(()=>{M("instant")},0)},children:W?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"size-5 text-yellow-400"}),e.jsx("span",{className:"mr-1 text-sm font-medium text-white",children:"Continue chatting.."})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 text-yellow-400"}),e.jsx("span",{className:"mr-1 text-sm font-semibold text-yellow-400",children:"AI Tutor"}),e.jsx("span",{className:"hidden text-white sm:block",children:"Have a question? Type here"}),e.jsx("span",{className:"block text-white sm:hidden",children:"Ask anything"})]})})]})]})}export{T as C,et as R};
