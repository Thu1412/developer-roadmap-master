import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.DatCARk7.js";import{u as v}from"./useQuery.BDS8a8wn.js";import{g as F}from"./browser.3c2kCsRM.js";import{c as f}from"./classname.y9b8gBZq.js";import{i as E}from"./jwt.1xGNZsvU.js";import{a as C}from"./ai-course.C9pe4RQ2.js";import{u as L}from"./billing.CdvAGjKR.js";import{a as M}from"./query-client.BXTfwa3d.js";import{U as H}from"./UpgradeAccountModal.Bf1PhEwX.js";import{A as D}from"./AILimitsPopup.IBd1xV7_.js";import{g as R}from"./number.al1uMBuK.js";import{Z as I}from"./zap.W9oJWPBR.js";import{u as Z}from"./use-auth.Bw1nhFr_.js";import{l as V}from"./auth.Blx_4y9V.js";import{s as _}from"./popup.CdCAhVM2.js";import{D as $,a as O,b as B,c as b,d as q}from"./DropdownMenu.CS77xgrA.js";import{c as j}from"./createLucideIcon.uNyFMN5K.js";import{C as z}from"./chevron-down.C3HM4CLF.js";import{U as G}from"./user-round.BP1hNqEM.js";import{S as Q}from"./settings.DLc89oZt.js";import{L as W}from"./log-out.u8E82mMZ.js";import{X}from"./x.ZVxf9pxD.js";import{B as N}from"./book-open.D6AjheEV.js";import{F as Y}from"./file-text.QnmHb0pX.js";import{M as w}from"./map.D6boQwTM.js";import{S as J}from"./swords.BeJjnBga.js";import{M as K}from"./message-circle.gi35PKdE.js";import{S as ee}from"./star.efkPFH5L.js";import{C as se}from"./chevron-right.CrKPBoyZ.js";import{R as te}from"./RoadmapLogo.CJwoV5Wp.js";import{M as ae}from"./menu.DgseLi6n.js";import"./js.cookie.Cz0CWeBA.js";import"./query-http.YhxTqNi8.js";import"./fp.esm.D_pnqQn4.js";import"./useMutation.BrRqCquH.js";import"./use-toast.BdCcSTJE.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./Modal.B1RqXaQs.js";import"./use-outside-click.f1LA7r1K.js";import"./use-keydown.UQ-VttR1.js";import"./UpdatePlanConfirmation.vVGIG51-.js";import"./VerifyUpgrade.DHdhu0dP.js";import"./circle-check-big.DD4Bg2zr.js";import"./loader-circle.1OH4z0ap.js";import"./gift.ZPnr9qou.js";import"./Combination.DIpUOS19.js";import"./floating-ui.dom.BG6dflv2.js";import"./index.Cfv66hal.js";import"./index.Bz-QvCnq.js";import"./check.DCsIB_xO.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oe=j("compass",re);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],le=j("credit-card",ie);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ce=j("log-in",ne);function me(r){return e.jsxs("svg",{viewBox:"0 0 310 248",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[e.jsx("rect",{width:"310",height:"247.211",fill:"black"}),e.jsx("path",{d:"M205.179 45.1641H263.851V201.278H205.179V45.1641Z",fill:"white"}),e.jsx("path",{d:"M45.1641 45.1743H104.598L104.598 202.048H45.1641L45.1641 45.1743Z",fill:"white"}),e.jsx("path",{d:"M160.984 45.1743V103.716L45.1641 103.716L45.1641 45.1743H160.984Z",fill:"white"}),e.jsx("path",{d:"M125.171 45.1743H184.605V201.284H125.171V45.1743Z",fill:"white"}),e.jsx("path",{d:"M159.841 131.85V173.88L63.8324 173.88L63.8324 131.85H159.841Z",fill:"white"})]})}function de(r){const{onUpgrade:s,title:o="Upgrade",description:i="Get access to all features and benefits of the AI Tutor.",descriptionClassName:c,titleClassName:a,className:m,showLimit:u=!0}=r,{data:d,isLoading:l}=v(C(),M),{used:x,limit:h}=d??{used:0,limit:0},g=R(x,h);return e.jsxs("button",{onClick:s,className:f("animate-fade-in mx-4 mt-4 rounded-xl bg-amber-100 p-4 text-left transition-colors hover:bg-amber-200/80",m),children:[e.jsxs("span",{className:"mb-2 flex items-center gap-2",children:[e.jsx(I,{className:"size-4 text-amber-600"}),e.jsx("span",{className:f("font-medium text-amber-900",a),children:o})]}),e.jsx("span",{className:f("mt-1 block text-left text-xs leading-4 text-amber-700",c),children:i}),u&&e.jsxs("div",{className:"mt-5",children:[e.jsx("div",{className:"relative h-1 w-full rounded-full bg-amber-300/40",children:e.jsx("div",{className:"absolute inset-0 h-full rounded-full bg-amber-600/80",style:{width:`${g}%`}})}),e.jsxs("span",{className:"mt-2 block text-xs text-amber-700",children:[g,"% of the daily limit used"]})]})]})}function xe(){const[r,s]=n.useState(!1);return n.useEffect(()=>{s(!0)},[]),r}function pe(r){const s=Z(),{isPaidUser:o,isLoading:i}=L();if(!xe()||i)return null;if(!s)return e.jsxs("button",{onClick:_,className:"animate-fade-in inline-flex h-auto w-full items-center justify-center gap-2 rounded-lg border border-gray-700 bg-black px-4 py-2.5 text-sm font-medium text-white transition-all duration-200 outline-none hover:!opacity-80 disabled:cursor-not-allowed disabled:opacity-60",children:[e.jsx(ce,{className:"size-4"}),"Free Signup or Login"]});const a=s?.avatar?`https://dodrc8eu8m09s.cloudfront.net/avatars/${s?.avatar}`:"/img/default-avatar.png";return e.jsxs($,{children:[e.jsx(O,{asChild:!0,children:e.jsxs("button",{className:"group flex w-full items-center gap-3 rounded-lg border border-transparent px-4 py-2.5 text-sm font-medium transition-colors hover:bg-gray-100 hover:text-black focus:outline-none data-[state=open]:bg-gray-100 data-[state=open]:text-black",children:[e.jsx("div",{className:"relative size-7 shrink-0 overflow-hidden rounded-full",children:e.jsx("img",{src:a,alt:s.name,className:"absolute inset-0 h-full w-full object-cover"})}),e.jsxs("div",{className:"flex min-w-0 flex-1 flex-col text-left",children:[e.jsx("span",{className:"truncate font-medium text-gray-900",children:s.name}),e.jsx("span",{className:"truncate text-xs text-gray-500",children:o?"Pro Member":"Free User"})]}),e.jsx(z,{className:"size-4 text-gray-400 transition-transform duration-200 group-data-[state=open]:rotate-180"})]})}),e.jsxs(B,{className:"w-[var(--radix-dropdown-menu-trigger-width)] min-w-52 rounded-lg border border-gray-200 bg-white p-1",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{asChild:!0,children:e.jsxs("a",{href:"/account",className:"flex w-full items-center gap-3 rounded px-3 py-2 text-sm font-medium text-gray-500 transition-colors hover:bg-gray-100 hover:text-black",children:[e.jsx(G,{className:"size-4"}),"Account"]})}),e.jsx(b,{asChild:!0,children:e.jsxs("a",{href:"/account/billing",className:"flex w-full items-center gap-3 rounded px-3 py-2 text-sm font-medium text-gray-500 transition-colors hover:bg-gray-100 hover:text-black",children:[e.jsx(le,{className:"size-4"}),"Billing"]})}),e.jsx(b,{asChild:!0,children:e.jsxs("a",{href:"/account/settings",className:"flex w-full items-center gap-3 rounded px-3 py-2 text-sm font-medium text-gray-500 transition-colors hover:bg-gray-100 hover:text-black",children:[e.jsx(Q,{className:"size-4"}),"Settings"]})})]}),e.jsx(q,{className:"my-1"}),e.jsxs(b,{className:"flex w-full items-center gap-3 rounded px-3 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-50 hover:text-red-700",onSelect:()=>{V()},children:[e.jsx(W,{className:"size-4"}),"Logout"]})]})]})}const fe=[{key:"new",label:"Create with AI",href:"/ai",icon:I,children:[{key:"create-course",label:"Course",href:"/ai?format=course",icon:N},{key:"create-guide",label:"Guide",href:"/ai?format=guide",icon:Y},{key:"create-roadmap",label:"Roadmap",href:"/ai?format=roadmap",icon:w},{key:"quiz",label:"Quiz",href:"/ai/quiz",icon:J}]},{key:"chat",label:"Ask AI Tutor",href:"/ai/chat",icon:K},{key:"roadmap-chat",label:"Roadmap Chat",href:"/ai/roadmap-chat",icon:w},{key:"library",label:"My Learning",href:"/ai/courses",icon:N},{key:"staff-picks",label:"Staff Picks",href:"/ai/staff-picks",icon:ee},{key:"community",label:"Community",href:"/ai/community",icon:oe}];function ue(r){const{activeTab:s,isFloating:o,onClose:i}=r,[c,a]=n.useState(""),[m,u]=n.useState(!0),[d,l]=n.useState({new:!0}),[x,h]=n.useState(!1),[g,y]=n.useState(!1),{isPaidUser:S,isLoading:A}=L(),{data:he,isLoading:U}=v(C(),M);n.useEffect(()=>{const{format:t}=F();a(t||"course"),u(!1)},[]);const P=A||U,T=t=>{l(p=>({...p,[t]:!p[t]}))};return e.jsxs(e.Fragment,{children:[g&&e.jsx(H,{onClose:()=>y(!1)}),x&&e.jsx(D,{onClose:()=>h(!1),onUpgrade:()=>{y(!0),h(!1)}}),e.jsxs("aside",{className:f("flex w-[255px] shrink-0 flex-col border-r border-slate-200",o?"fixed top-0 bottom-0 left-0 z-50 flex border-r-0 bg-white shadow-xl":"hidden lg:flex"),children:[o&&e.jsx("button",{className:"absolute top-3 right-3",onClick:i,children:e.jsx(X,{strokeWidth:3,className:"size-3.5 text-gray-400 hover:text-black"})}),e.jsxs("div",{className:"flex flex-col items-start justify-center px-6 py-5",children:[e.jsx("div",{className:"flex flex-row items-center gap-1",children:e.jsx(me,{className:"size-11 text-gray-500",color:"black"})}),e.jsxs("div",{className:"my-3 flex flex-col",children:[e.jsx("h2",{className:"-mb-px text-base font-semibold text-black",children:"AI Tutor"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["by"," ",e.jsx("a",{href:"/",className:"underline-offset-2 hover:underline",children:"roadmap.sh"})]})]}),e.jsx("p",{className:"max-w-[150px] text-xs text-gray-500",children:"Your personalized learning companion for any topic"})]}),e.jsxs("ul",{className:"list-none space-y-1",children:[fe.map(t=>e.jsxs("li",{children:[e.jsx(k,{item:t,isActive:s===t.key,isExpanded:d[t.key]||!1,onToggleExpanded:()=>T(t.key)}),t.children&&d[t.key]&&e.jsxs("ul",{className:"relative list-none",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-7 w-px bg-gray-200"}),t.children.map(p=>e.jsx("li",{children:e.jsx(k,{item:p,isActive:s===t.key&&`create-${c}`===p.key||s===p.key,isChild:!0})},p.key))]})]},t.key)),!m&&E()&&!S&&!P&&e.jsx("li",{children:e.jsx(de,{onUpgrade:()=>y(!0)})})]}),e.jsx("div",{className:"mx-2 mt-auto mb-2",children:e.jsx(pe,{})})]}),o&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:i})]})}function k(r){const{item:s,as:o="a",onClick:i,className:c,isActive:a,isExpanded:m,onToggleExpanded:u,isChild:d}=r,l="children"in s&&s.children,x=l?"button":o;return e.jsxs(x,{...x==="a"&&!l?{href:s.href}:{},...x==="button"?{onClick:l?u:i}:{},className:f("font-regular flex w-full items-center border-r-2 px-5 py-2 text-sm transition-all",a&&!l?"border-r-black bg-gray-100 text-black":"border-r-transparent text-gray-500",!a&&!l&&"hover:bg-gray-50 hover:text-gray-700",!a&&l&&"hover:text-gray-700",d&&"border-r-transparent py-1.5 pl-11",d&&a&&"border-r-black border-r-2 bg-gray-100 text-black",c),children:[e.jsxs("span",{className:"flex grow items-center",children:[!d&&e.jsx(s.icon,{className:"mr-2 size-4"}),s.label]}),l&&e.jsx("span",{className:"ml-auto",children:m?e.jsx(z,{className:"size-4"}):e.jsx(se,{className:"size-4"})})]})}function us(r){const{children:s,activeTab:o,wrapperClassName:i,containerClassName:c}=r,[a,m]=n.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-10 flex flex-row items-center justify-between border-b border-slate-200 bg-white px-4 py-3 lg:hidden",children:[e.jsx("a",{href:"/",className:"flex flex-row items-center gap-1.5",children:e.jsx(te,{className:"size-6 text-gray-500",color:"black"})}),e.jsx("button",{className:"flex flex-row items-center gap-1",onClick:()=>m(!a),children:e.jsx(ae,{className:"size-5 text-gray-500"})})]}),e.jsxs("div",{className:f("flex flex-grow flex-row lg:h-screen",c),children:[e.jsx(ue,{onClose:()=>m(!1),isFloating:a,activeTab:o}),e.jsx("div",{className:f("flex flex-grow flex-col overflow-y-scroll bg-gray-100 p-3 lg:p-4",i),children:s})]})]})}export{us as AITutorLayout};
